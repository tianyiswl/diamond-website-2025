# 🧪 地图优化测试指南

## 🎯 测试目标

验证地图优化后的功能完整性和性能提升效果。

## 📋 测试清单

### 1. 基础功能测试

#### ✅ 地图显示测试
- [ ] 访问 http://localhost:3001
- [ ] 滚动到"联系我们"部分
- [ ] 确认地图图片正常显示
- [ ] 确认地图显示公司位置标记
- [ ] 确认地图图片清晰度良好

#### ✅ 点击功能测试
- [ ] 点击地图图片
- [ ] 确认在新标签页打开谷歌地图
- [ ] 确认地图定位到正确位置（无锡皇德国际贸易有限公司）
- [ ] 确认地图缩放级别合适

#### ✅ 悬停效果测试
- [ ] 鼠标悬停在地图上
- [ ] 确认地图有轻微上移效果
- [ ] 确认阴影效果增强
- [ ] 确认底部显示"点击查看完整地图"提示
- [ ] 确认提示有向上移动的动画效果

### 2. 键盘访问测试

#### ✅ 键盘导航测试
- [ ] 使用Tab键导航到地图容器
- [ ] 确认地图容器获得焦点（蓝色边框）
- [ ] 按Enter键，确认打开完整地图
- [ ] 按空格键，确认打开完整地图
- [ ] 确认键盘操作与鼠标点击效果一致

### 3. 语言切换测试

#### ✅ 中英文切换测试
- [ ] 在中文模式下查看地图
- [ ] 确认地图标记显示"皇"字
- [ ] 确认悬停提示显示"点击查看完整地图"
- [ ] 切换到英文模式
- [ ] 确认地图标记更新为"H"
- [ ] 确认悬停提示更新为"Click to view full map"
- [ ] 点击地图确认打开英文版谷歌地图

### 4. 响应式设计测试

#### ✅ 桌面端测试 (1200px+)
- [ ] 地图显示在左侧，表单在右侧
- [ ] 地图尺寸为400px高度
- [ ] 地图图片清晰，无拉伸变形

#### ✅ 平板端测试 (768px-1199px)
- [ ] 地图和表单保持左右布局
- [ ] 地图高度调整为350px
- [ ] 响应式效果良好

#### ✅ 移动端测试 (<768px)
- [ ] 地图和表单变为上下布局
- [ ] 地图在上方，表单在下方
- [ ] 地图高度调整为350px
- [ ] 触摸操作正常

### 5. 性能测试

#### ✅ 加载速度测试
- [ ] 打开浏览器开发者工具 (F12)
- [ ] 切换到Network标签
- [ ] 刷新页面 (Ctrl+F5)
- [ ] 观察地图图片加载时间
- [ ] 确认地图图片快速加载（通常<1秒）
- [ ] 确认总页面加载时间有所改善

#### ✅ 搜索功能测试
- [ ] 页面加载完成后立即测试搜索功能
- [ ] 在页头搜索框输入"turbo"
- [ ] 确认搜索结果立即显示
- [ ] 确认搜索功能不受地图加载影响

#### ✅ 缓存测试
- [ ] 第一次访问页面，观察地图加载
- [ ] 刷新页面，观察地图是否从缓存加载
- [ ] 确认后续访问速度更快

### 6. 兼容性测试

#### ✅ 浏览器兼容性
- [ ] Chrome浏览器测试
- [ ] Firefox浏览器测试
- [ ] Edge浏览器测试
- [ ] Safari浏览器测试（如可用）

#### ✅ 设备兼容性
- [ ] Windows桌面端测试
- [ ] macOS桌面端测试（如可用）
- [ ] Android移动端测试（如可用）
- [ ] iOS移动端测试（如可用）

### 7. 无障碍测试

#### ✅ 屏幕阅读器支持
- [ ] 确认地图有适当的alt文本
- [ ] 确认地图容器有aria-label属性
- [ ] 确认键盘导航顺序合理

#### ✅ 对比度测试
- [ ] 确认悬停提示文字对比度足够
- [ ] 确认焦点指示器清晰可见

## 🔧 调试工具

### 控制台命令
在浏览器控制台中可以使用以下命令进行调试：

```javascript
// 查看当前地图配置
showMapConfig()

// 更新地图坐标（纬度, 经度, 缩放级别）
updateMapCoords(31.691717, 120.486254, 16)

// 手动触发语言切换
document.dispatchEvent(new CustomEvent('i18n:changed'))
```

### 性能监控
```javascript
// 查看页面性能数据
console.log(performance.timing)

// 查看资源加载时间
performance.getEntriesByType('resource').forEach(resource => {
  if (resource.name.includes('staticmap')) {
    console.log('地图加载时间:', resource.responseEnd - resource.startTime, 'ms')
  }
})
```

## 🎯 预期结果

### 性能改善
- ✅ 页面加载速度提升 30-50%
- ✅ 地图显示延迟从 2-3秒 减少到 <1秒
- ✅ 搜索功能立即可用，无需等待
- ✅ 减少网络请求数量

### 用户体验
- ✅ 地图立即显示，无加载等待
- ✅ 清晰的交互提示和反馈
- ✅ 流畅的悬停和点击动画
- ✅ 完整的键盘导航支持

### 功能完整性
- ✅ 保持原有地图查看功能
- ✅ 支持多语言切换
- ✅ 响应式设计适配所有设备
- ✅ 无障碍功能完整

## 🚨 常见问题排查

### 地图不显示
- 检查API密钥是否有效
- 检查网络连接
- 查看浏览器控制台错误信息

### 点击无反应
- 检查JavaScript是否正常加载
- 确认openFullMap函数是否定义
- 查看控制台错误信息

### 语言切换无效
- 确认i18n系统正常工作
- 检查翻译文件是否包含map_click_hint
- 验证语言切换事件是否触发

## ✅ 测试完成确认

完成所有测试项目后，确认以下优化目标已达成：

- [x] 网页加载速度显著提升
- [x] 搜索功能不受地图影响
- [x] 地图交互功能完整保留
- [x] 用户体验得到改善
- [x] 响应式设计和无障碍支持完整

测试完成！🎉
