<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>è¯¢ä»·è¡¨å•åŠŸèƒ½æµ‹è¯•</title>
    <style>
      body {
        font-family: "Microsoft YaHei", sans-serif;
        max-width: 800px;
        margin: 0 auto;
        padding: 20px;
        background: #f5f5f5;
      }
      .test-container {
        background: white;
        padding: 30px;
        border-radius: 15px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        margin-bottom: 20px;
      }
      .test-title {
        color: #007bff;
        font-size: 24px;
        margin-bottom: 20px;
        text-align: center;
      }
      .test-section {
        margin-bottom: 30px;
        padding: 20px;
        border: 2px solid #e9ecef;
        border-radius: 10px;
      }
      .test-section h3 {
        color: #333;
        margin-bottom: 15px;
      }
      .test-button {
        background: linear-gradient(135deg, #007bff, #0056b3);
        color: white;
        border: none;
        padding: 12px 25px;
        border-radius: 8px;
        cursor: pointer;
        margin: 5px;
        font-size: 14px;
        transition: all 0.3s ease;
      }
      .test-button:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(0, 123, 255, 0.4);
      }
      .test-button.success {
        background: linear-gradient(135deg, #28a745, #20c997);
      }
      .test-button.error {
        background: linear-gradient(135deg, #dc3545, #fd7e14);
      }
      .test-results {
        background: #f8f9fa;
        padding: 15px;
        border-radius: 8px;
        margin-top: 15px;
        font-family: monospace;
        font-size: 12px;
      }
      .device-info {
        background: #e3f2fd;
        padding: 15px;
        border-radius: 8px;
        margin-bottom: 20px;
      }
      .timer {
        font-weight: bold;
        color: #007bff;
      }
    </style>
  </head>
  <body>
    <div class="test-container">
      <h1 class="test-title">ğŸ“ è¯¢ä»·è¡¨å•åŠŸèƒ½æµ‹è¯•</h1>

      <div class="device-info">
        <h4>ğŸ” è®¾å¤‡ä¿¡æ¯æ£€æµ‹</h4>
        <p><strong>å±å¹•å®½åº¦:</strong> <span id="screenWidth"></span>px</p>
        <p><strong>ç”¨æˆ·ä»£ç†:</strong> <span id="userAgent"></span></p>
        <p><strong>è®¾å¤‡ç±»å‹:</strong> <span id="deviceType"></span></p>
        <p><strong>é¢„æœŸåŠ¨ç”»:</strong> <span id="expectedAnimation"></span></p>
      </div>

      <div class="test-section">
        <h3>ğŸ¨ é€šçŸ¥æ¶ˆæ¯æµ‹è¯•</h3>
        <p>æµ‹è¯•ä¸åŒç±»å‹çš„é€šçŸ¥æ¶ˆæ¯æ˜¾ç¤ºæ•ˆæœå’Œ6ç§’è‡ªåŠ¨æ¶ˆå¤±åŠŸèƒ½ï¼š</p>
        <button class="test-button success" onclick="testSuccessNotification()">
          âœ… æµ‹è¯•æˆåŠŸé€šçŸ¥
        </button>
        <button class="test-button error" onclick="testErrorNotification()">
          âŒ æµ‹è¯•é”™è¯¯é€šçŸ¥
        </button>
        <button class="test-button" onclick="testInfoNotification()">
          â„¹ï¸ æµ‹è¯•ä¿¡æ¯é€šçŸ¥
        </button>
        <div class="test-results" id="notificationResults"></div>
      </div>

      <div class="test-section">
        <h3>ğŸ“± ç§»åŠ¨ç«¯åŠ¨ç”»æµ‹è¯•</h3>
        <p>æµ‹è¯•ç§»åŠ¨ç«¯å’Œæ¡Œé¢ç«¯çš„ä¸åŒåŠ¨ç”»æ•ˆæœï¼š</p>
        <button class="test-button" onclick="testMobileAnimation()">
          ğŸ“± æ¨¡æ‹Ÿç§»åŠ¨ç«¯é€šçŸ¥
        </button>
        <button class="test-button" onclick="testDesktopAnimation()">
          ğŸ’» æ¨¡æ‹Ÿæ¡Œé¢ç«¯é€šçŸ¥
        </button>
        <div class="test-results" id="animationResults"></div>
      </div>

      <div class="test-section">
        <h3>â±ï¸ è®¡æ—¶å™¨æµ‹è¯•</h3>
        <p>éªŒè¯é€šçŸ¥æ¶ˆæ¯6ç§’è‡ªåŠ¨æ¶ˆå¤±åŠŸèƒ½ï¼š</p>
        <button class="test-button" onclick="testTimingFunction()">
          â° å¼€å§‹è®¡æ—¶æµ‹è¯•
        </button>
        <div class="test-results" id="timingResults"></div>
      </div>

      <div class="test-section">
        <h3>ğŸ”— è¡¨å•æäº¤æµ‹è¯•</h3>
        <p>æµ‹è¯•å®é™…çš„è¡¨å•æäº¤åŠŸèƒ½ï¼ˆéœ€è¦åœ¨ä¸»é¡µé¢è¿›è¡Œï¼‰ï¼š</p>
        <button class="test-button" onclick="openMainPage()">
          ğŸ  æ‰“å¼€ä¸»é¡µæµ‹è¯•è¡¨å•
        </button>
        <div class="test-results" id="formResults">
          <p><strong>æµ‹è¯•æ­¥éª¤ï¼š</strong></p>
          <ol>
            <li>åœ¨ä¸»é¡µé¢å¡«å†™è¯¢ä»·è¡¨å•</li>
            <li>ç‚¹å‡»æäº¤æŒ‰é’®</li>
            <li>è§‚å¯ŸåŠ è½½çŠ¶æ€æ˜¾ç¤º</li>
            <li>éªŒè¯æˆåŠŸé€šçŸ¥çš„ç»¿è‰²æ¸å˜æ•ˆæœ</li>
            <li>ç¡®è®¤6ç§’åè‡ªåŠ¨æ¶ˆå¤±</li>
            <li>æµ‹è¯•ç§»åŠ¨ç«¯å“åº”å¼æ•ˆæœ</li>
          </ol>
        </div>
      </div>
    </div>

    <script>
      // æ˜¾ç¤ºè®¾å¤‡ä¿¡æ¯
      function updateDeviceInfo() {
        document.getElementById("screenWidth").textContent = window.innerWidth;
        document.getElementById("userAgent").textContent = navigator.userAgent;

        const isMobile =
          window.innerWidth <= 768 ||
          /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(
            navigator.userAgent,
          );
        document.getElementById("deviceType").textContent = isMobile
          ? "ç§»åŠ¨è®¾å¤‡"
          : "æ¡Œé¢è®¾å¤‡";
        document.getElementById("expectedAnimation").textContent = isMobile
          ? "slideInDown/slideOutUp"
          : "slideInRight/slideOutRight";
      }

      // é€šçŸ¥æ¶ˆæ¯å‡½æ•°ï¼ˆå¤åˆ¶è‡ªä¸»æ–‡ä»¶ï¼‰
      function showNotification(message, type = "info") {
        const existingNotification = document.querySelector(".notification");
        if (existingNotification) {
          existingNotification.remove();
        }

        const isMobile =
          window.innerWidth <= 768 ||
          /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(
            navigator.userAgent,
          );

        const notification = document.createElement("div");
        notification.className = `notification notification-${type}`;

        let icon = "";
        if (type === "success") {
          icon =
            '<i class="fas fa-check-circle" style="margin-right: 8px; font-size: 16px;"></i>';
        } else if (type === "error") {
          icon =
            '<i class="fas fa-exclamation-circle" style="margin-right: 8px; font-size: 16px;"></i>';
        } else {
          icon =
            '<i class="fas fa-info-circle" style="margin-right: 8px; font-size: 16px;"></i>';
        }

        notification.innerHTML = `
                <div class="notification-content">
                    <div class="notification-message">
                        ${icon}
                        <span>${message}</span>
                    </div>
                    <button class="notification-close" onclick="this.parentElement.parentElement.remove()">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            `;

        // æ·»åŠ åŠ¨ç”»æ ·å¼
        if (!document.querySelector("#notification-animations")) {
          const style = document.createElement("style");
          style.id = "notification-animations";
          style.textContent = `
                    @keyframes slideInRight {
                        from { opacity: 0; transform: translateX(100%); }
                        to { opacity: 1; transform: translateX(0); }
                    }
                    @keyframes slideOutRight {
                        from { opacity: 1; transform: translateX(0); }
                        to { opacity: 0; transform: translateX(100%); }
                    }
                    @keyframes slideInDown {
                        from { opacity: 0; transform: translateY(-100%); }
                        to { opacity: 1; transform: translateY(0); }
                    }
                    @keyframes slideOutUp {
                        from { opacity: 1; transform: translateY(0); }
                        to { opacity: 0; transform: translateY(-100%); }
                    }
                    .notification-content {
                        display: flex;
                        justify-content: space-between;
                        align-items: center;
                        gap: 10px;
                    }
                    .notification-close {
                        background: none;
                        border: none;
                        color: inherit;
                        cursor: pointer;
                        font-size: 14px;
                        padding: 5px;
                        border-radius: 3px;
                        transition: background-color 0.2s;
                    }
                    .notification-close:hover {
                        background-color: rgba(255,255,255,0.2);
                    }
                `;
          document.head.appendChild(style);
        }

        // æ ¹æ®è®¾å¤‡ç±»å‹è®¾ç½®æ ·å¼å’ŒåŠ¨ç”»
        if (isMobile) {
          notification.style.cssText = `
                    position: fixed;
                    top: 15px;
                    right: 15px;
                    left: 15px;
                    z-index: 10000;
                    max-width: none;
                    min-width: auto;
                    padding: 16px 18px;
                    border-radius: 10px;
                    animation: slideInDown 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
                    font-family: 'Microsoft YaHei', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
                    backdrop-filter: blur(10px);
                    transform: translateZ(0);
                    will-change: transform, opacity;
                `;
        } else {
          notification.style.cssText = `
                    position: fixed;
                    top: 20px;
                    right: 20px;
                    z-index: 10000;
                    max-width: 420px;
                    min-width: 300px;
                    padding: 18px 22px;
                    border-radius: 12px;
                    animation: slideInRight 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
                    font-family: 'Microsoft YaHei', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
                    backdrop-filter: blur(10px);
                    transform: translateZ(0);
                    will-change: transform, opacity;
                `;
        }

        // æ ¹æ®ç±»å‹è®¾ç½®é¢œè‰²å’Œæ•ˆæœ
        if (type === "success") {
          notification.style.background =
            "linear-gradient(135deg, #00b76c, #28a745, #20c997)";
          notification.style.color = "white";
          notification.style.border = "1px solid rgba(40, 167, 69, 0.3)";
          notification.style.boxShadow =
            "0 8px 25px rgba(40, 167, 69, 0.25), 0 4px 12px rgba(0, 0, 0, 0.15)";
        } else if (type === "error") {
          notification.style.background =
            "linear-gradient(135deg, #dc3545, #fd7e14)";
          notification.style.color = "white";
          notification.style.border = "1px solid rgba(220, 53, 69, 0.3)";
          notification.style.boxShadow =
            "0 8px 25px rgba(220, 53, 69, 0.25), 0 4px 12px rgba(0, 0, 0, 0.15)";
        } else {
          notification.style.background =
            "linear-gradient(135deg, #007bff, #6f42c1)";
          notification.style.color = "white";
          notification.style.border = "1px solid rgba(0, 123, 255, 0.3)";
          notification.style.boxShadow =
            "0 8px 25px rgba(0, 123, 255, 0.25), 0 4px 12px rgba(0, 0, 0, 0.15)";
        }

        document.body.appendChild(notification);

        // 6ç§’åè‡ªåŠ¨å…³é—­
        setTimeout(() => {
          if (notification.parentNode) {
            const exitAnimation = isMobile
              ? "slideOutUp 0.3s ease"
              : "slideOutRight 0.3s ease";
            notification.style.animation = exitAnimation;
            setTimeout(() => notification.remove(), 300);
          }
        }, 6000);

        return notification;
      }

      // æµ‹è¯•å‡½æ•°
      function testSuccessNotification() {
        const startTime = Date.now();
        showNotification(
          "ğŸ“§ è¯¢ä»·ä¿¡æ¯å‘é€æˆåŠŸï¼æˆ‘ä»¬å°†åœ¨24å°æ—¶å†…å›å¤æ‚¨ã€‚",
          "success",
        );
        document.getElementById("notificationResults").innerHTML +=
          `<p>[${new Date().toLocaleTimeString()}] æˆåŠŸé€šçŸ¥å·²æ˜¾ç¤ºï¼Œå¼€å§‹6ç§’å€’è®¡æ—¶...</p>`;
      }

      function testErrorNotification() {
        showNotification("âŒ å‘é€å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•æˆ–ç›´æ¥è”ç³»æˆ‘ä»¬ã€‚", "error");
        document.getElementById("notificationResults").innerHTML +=
          `<p>[${new Date().toLocaleTimeString()}] é”™è¯¯é€šçŸ¥å·²æ˜¾ç¤º</p>`;
      }

      function testInfoNotification() {
        showNotification("â„¹ï¸ è¿™æ˜¯ä¸€æ¡ä¿¡æ¯æç¤ºæ¶ˆæ¯", "info");
        document.getElementById("notificationResults").innerHTML +=
          `<p>[${new Date().toLocaleTimeString()}] ä¿¡æ¯é€šçŸ¥å·²æ˜¾ç¤º</p>`;
      }

      function testMobileAnimation() {
        // ä¸´æ—¶ä¿®æ”¹çª—å£å®½åº¦æ£€æµ‹
        const originalWidth = window.innerWidth;
        Object.defineProperty(window, "innerWidth", {
          value: 500,
          configurable: true,
        });
        showNotification("ğŸ“± è¿™æ˜¯ç§»åŠ¨ç«¯åŠ¨ç”»æ•ˆæœæµ‹è¯•", "info");
        Object.defineProperty(window, "innerWidth", {
          value: originalWidth,
          configurable: true,
        });
        document.getElementById("animationResults").innerHTML +=
          `<p>[${new Date().toLocaleTimeString()}] ç§»åŠ¨ç«¯åŠ¨ç”»æµ‹è¯• (slideInDown)</p>`;
      }

      function testDesktopAnimation() {
        Object.defineProperty(window, "innerWidth", {
          value: 1200,
          configurable: true,
        });
        showNotification("ğŸ’» è¿™æ˜¯æ¡Œé¢ç«¯åŠ¨ç”»æ•ˆæœæµ‹è¯•", "info");
        document.getElementById("animationResults").innerHTML +=
          `<p>[${new Date().toLocaleTimeString()}] æ¡Œé¢ç«¯åŠ¨ç”»æµ‹è¯• (slideInRight)</p>`;
      }

      function testTimingFunction() {
        const startTime = Date.now();
        showNotification("â° è®¡æ—¶æµ‹è¯•ï¼šè¿™æ¡æ¶ˆæ¯å°†åœ¨6ç§’åè‡ªåŠ¨æ¶ˆå¤±", "info");

        let countdown = 6;
        const timer = setInterval(() => {
          countdown--;
          document.getElementById("timingResults").innerHTML =
            `<p class="timer">å€’è®¡æ—¶: ${countdown} ç§’</p>`;

          if (countdown <= 0) {
            clearInterval(timer);
            const actualTime = (Date.now() - startTime) / 1000;
            document.getElementById("timingResults").innerHTML +=
              `<p>âœ… æµ‹è¯•å®Œæˆï¼å®é™…æ¶ˆå¤±æ—¶é—´: ${actualTime.toFixed(1)} ç§’</p>`;
          }
        }, 1000);
      }

      function openMainPage() {
        window.open("http://localhost:3002", "_blank");
        document.getElementById("formResults").innerHTML +=
          `<p>[${new Date().toLocaleTimeString()}] ä¸»é¡µå·²åœ¨æ–°æ ‡ç­¾é¡µæ‰“å¼€ï¼Œè¯·è¿›è¡Œè¡¨å•æµ‹è¯•</p>`;
      }

      // é¡µé¢åŠ è½½æ—¶æ›´æ–°è®¾å¤‡ä¿¡æ¯
      window.addEventListener("load", updateDeviceInfo);
      window.addEventListener("resize", updateDeviceInfo);
    </script>
  </body>
</html>
