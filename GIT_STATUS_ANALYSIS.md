# ðŸ” é’»çŸ³ç½‘ç«™GitçŠ¶æ€åˆ†æžæŠ¥å‘Š

## ðŸ“Š **Gitä»“åº“çŠ¶æ€æ€»è§ˆ**

### âœ… **ä»“åº“åŸºæœ¬ä¿¡æ¯**

- **å½“å‰åˆ†æ”¯**: `master`
- **æœ¬åœ°é¢†å…ˆ**: 10ä¸ªæäº¤æœªæŽ¨é€åˆ°è¿œç¨‹ä»“åº“
- **å·¥ä½œåŒºçŠ¶æ€**: æœ‰æœªæäº¤çš„æ›´æ”¹
- **è¿œç¨‹ä»“åº“**: `git@github.com:tianyiswl/diamond-website-2025.git`

### ðŸ”„ **åˆ†æ”¯å’Œè¿œç¨‹é…ç½®**

```
ä¸»åˆ†æ”¯: master
è¿œç¨‹ä»“åº“:
  - origin: git@github.com:tianyiswl/diamond-website-2025.git
  - deploy: diamond-deploy:/var/git/diamond-website.git (ç”Ÿäº§éƒ¨ç½²)
```

---

## ðŸ“ **å·¥ä½œåŒºçŠ¶æ€è¯¦ç»†åˆ†æž**

### ðŸ”§ **å·²ä¿®æ”¹æ–‡ä»¶ï¼ˆéœ€è¦æš‚å­˜ï¼‰**

```
æ ¸å¿ƒæ–‡ä»¶:
  âœ“ server.js                                    # åŒ…å«æ™ºèƒ½ç¼“å­˜ä¼˜åŒ–
  âœ“ index.html                                   # ä¸»é¡µæ›´æ–°

å‰ç«¯èµ„æº:
  âœ“ assets/css/main.css                          # æ ·å¼ä¼˜åŒ–
  âœ“ assets/js/main.js                            # ä¸»è¦JavaScripté€»è¾‘
  âœ“ assets/js/header-footer-components.js        # ç»„ä»¶ä¼˜åŒ–
  âœ“ assets/js/i18n-manager.js                    # å›½é™…åŒ–ç®¡ç†
  âœ“ assets/js/modules/components/component-manager.js
  âœ“ assets/js/modules/services/company-service.js
  âœ“ assets/js/page-load-manager.js               # é¡µé¢åŠ è½½ç®¡ç†

é¡µé¢æ–‡ä»¶:
  âœ“ pages/privacy.html                           # éšç§æ”¿ç­–é¡µé¢
  âœ“ pages/product-detail.html                    # äº§å“è¯¦æƒ…é¡µé¢
  âœ“ pages/products.html                          # äº§å“åˆ—è¡¨é¡µé¢
  âœ“ pages/terms.html                             # æœåŠ¡æ¡æ¬¾é¡µé¢
```

### ðŸ“ **æœªè·Ÿè¸ªæ–‡ä»¶ï¼ˆæ–°å¢žæ–‡ä»¶ï¼‰**

```
éƒ¨ç½²å’Œä¼˜åŒ–è„šæœ¬:
  ðŸš€ push-to-production.ps1                      # ä¸€é”®æŽ¨é€è„šæœ¬
  ðŸš€ quick-deploy-optimized.sh                   # ä¼˜åŒ–éƒ¨ç½²è„šæœ¬
  ðŸš€ production-server-setup.sh                  # æœåŠ¡å™¨é…ç½®è„šæœ¬
  ðŸš€ upload-code.ps1                             # ä»£ç ä¸Šä¼ è„šæœ¬
  ðŸš€ verify-deployment.sh                        # éƒ¨ç½²éªŒè¯è„šæœ¬

æ€§èƒ½ä¼˜åŒ–æ–‡ä»¶:
  âš¡ performance-optimization.js                 # æ€§èƒ½ä¼˜åŒ–æ¨¡å—
  âš¡ cache-optimization-implementation.js        # ç¼“å­˜å®žçŽ°
  âš¡ json-storage-optimization.js               # JSONå­˜å‚¨ä¼˜åŒ–
  âš¡ performance-benchmark.js                   # æ€§èƒ½åŸºå‡†æµ‹è¯•

ç›‘æŽ§å’Œç®¡ç†:
  ðŸ“Š server-resource-monitor.sh                 # æœåŠ¡å™¨ç›‘æŽ§
  ðŸ”’ ssl-certificate-manager.sh                 # SSLè¯ä¹¦ç®¡ç†
  ðŸ›¡ï¸ production-data-protection.sh             # æ•°æ®ä¿æŠ¤

é…ç½®æ–‡ä»¶:
  âš™ï¸ deployment-config.sh                       # éƒ¨ç½²é…ç½®
  âš™ï¸ ecosystem.config.js                        # PM2é…ç½®

æ–‡æ¡£å’ŒæŒ‡å—:
  ðŸ“š COMPLETE_DEPLOYMENT_GUIDE.md               # å®Œæ•´éƒ¨ç½²æŒ‡å—
  ðŸ“š SERVER_OPTIMIZATION_GUIDE.md               # æœåŠ¡å™¨ä¼˜åŒ–æŒ‡å—
  ðŸ“š QUICK_UPDATE_COMMANDS.md                   # å¿«é€Ÿæ›´æ–°å‘½ä»¤
  ðŸ“š production-update-guide.md                 # ç”Ÿäº§æ›´æ–°æŒ‡å—
  ðŸ“š JSON_STORAGE_PERFORMANCE_ANALYSIS.md       # æ€§èƒ½åˆ†æžæŠ¥å‘Š

è°ƒè¯•å’Œæµ‹è¯•:
  ðŸ”§ debug-form.js                              # è¡¨å•è°ƒè¯•
  ðŸ”§ debug-loading-states.js                    # åŠ è½½çŠ¶æ€è°ƒè¯•
  ðŸ§ª test-form-functionality.html               # åŠŸèƒ½æµ‹è¯•
  ðŸ§ª test-loading-fix.html                      # åŠ è½½ä¿®å¤æµ‹è¯•

å‰ç«¯ä¼˜åŒ–:
  âš¡ assets/js/global-loading-screen.js         # å…¨å±€åŠ è½½å±å¹•
  âš¡ assets/js/page-render-coordinator.js       # é¡µé¢æ¸²æŸ“åè°ƒå™¨

å…¶ä»–å·¥å…·:
  ðŸ“¦ manual-deploy/                             # æ‰‹åŠ¨éƒ¨ç½²ç›®å½•
  ðŸ—ƒï¸ diamond-manual-deploy-20250718-184640.zip # éƒ¨ç½²å¤‡ä»½
```

---

## ðŸŽ¯ **æ™ºèƒ½ç¼“å­˜ä¼˜åŒ–ä»£ç éªŒè¯**

### âœ… **å·²å®žæ–½çš„ç¼“å­˜ä¼˜åŒ–**

```javascript
// server.js ä¸­çš„æ™ºèƒ½ç¼“å­˜ç³»ç»Ÿ
ðŸš€ å†…å­˜ç¼“å­˜ç³»ç»Ÿ - ä¼˜åŒ–æ–‡ä»¶è¯»å–æ€§èƒ½
const fileCache = new Map();
const CACHE_TTL = 5 * 60 * 1000; // 5åˆ†é’Ÿç¼“å­˜

// å¸¦ç¼“å­˜çš„JSONæ–‡ä»¶è¯»å–å‡½æ•°
const readJsonFile = (filePath) => {
  // æ£€æŸ¥ç¼“å­˜
  const cached = fileCache.get(cacheKey);
  if (cached && (Date.now() - cached.timestamp) < CACHE_TTL) {
    return cached.data;
  }

  // æ›´æ–°ç¼“å­˜
  fileCache.set(cacheKey, {
    data: parsedData,
    timestamp: Date.now()
  });
}
```

### ðŸ“ˆ **æ€§èƒ½ä¼˜åŒ–ç‰¹æ€§**

- âœ… é™æ€æ–‡ä»¶ç¼“å­˜æŽ§åˆ¶ï¼ˆç”Ÿäº§çŽ¯å¢ƒ1å¤©ï¼‰
- âœ… å†…å­˜ç¼“å­˜ç³»ç»Ÿï¼ˆ5åˆ†é’ŸTTLï¼‰
- âœ… æ™ºèƒ½æ–‡ä»¶è¯»å–ä¼˜åŒ–
- âœ… é«˜æ€§èƒ½ç¼“å­˜æ ‡è¯†

---

## ðŸ”§ **ä¸€é”®æ›´æ–°åŠŸèƒ½éªŒè¯**

### âœ… **push-to-production.ps1 è„šæœ¬é…ç½®**

```powershell
å‚æ•°é…ç½®:
  ServerIP: ""                    # éœ€è¦é…ç½®æœåŠ¡å™¨IP
  Username: "root"                # é»˜è®¤ç”¨æˆ·å
  LocalPath: "f:\pycode\diamond-website-2025"  # æœ¬åœ°è·¯å¾„æ­£ç¡®

åŠŸèƒ½ç‰¹æ€§:
  âœ“ è‡ªåŠ¨æ£€æµ‹æœ¬åœ°æ›´æ”¹
  âœ“ æ™ºèƒ½æäº¤æ¶ˆæ¯ç”Ÿæˆ
  âœ“ GitæŽ¨é€å’Œæ ‡ç­¾åˆ›å»º
  âœ“ è¿œç¨‹æœåŠ¡å™¨æ›´æ–°è§¦å‘
  âœ“ éƒ¨ç½²ç»“æžœéªŒè¯
  âœ“ ç¼“å­˜æ€§èƒ½æµ‹è¯•
```

### ðŸ”— **Gitè¿œç¨‹ä»“åº“é…ç½®**

```
origin: git@github.com:tianyiswl/diamond-website-2025.git  âœ… å·²é…ç½®
deploy: diamond-deploy:/var/git/diamond-website.git        âœ… ç”Ÿäº§éƒ¨ç½²ä»“åº“
```

---

## ðŸš€ **æŽ¨èçš„Gitæ“ä½œç­–ç•¥**

### ç¬¬ä¸€æ­¥ï¼šæäº¤æ‰€æœ‰ä¼˜åŒ–ä»£ç 

```powershell
# è¿›å…¥é¡¹ç›®ç›®å½•
cd f:\pycode\diamond-website-2025

# æ·»åŠ æ‰€æœ‰æ›´æ”¹
git add .

# æäº¤ä¼˜åŒ–ä»£ç 
git commit -m "feat: æ™ºèƒ½ç¼“å­˜ç³»ç»Ÿå’Œæ€§èƒ½ä¼˜åŒ–å®Œæ•´å®žçŽ°

âœ¨ æ–°å¢žåŠŸèƒ½:
- æ™ºèƒ½å†…å­˜ç¼“å­˜ç³»ç»Ÿ (5åˆ†é’ŸTTL)
- ä¸€é”®ç”Ÿäº§çŽ¯å¢ƒæŽ¨é€è„šæœ¬
- å®Œæ•´çš„éƒ¨ç½²å’Œç›‘æŽ§å·¥å…·é›†
- æ€§èƒ½ä¼˜åŒ–å’ŒåŸºå‡†æµ‹è¯•

ðŸš€ éƒ¨ç½²å·¥å…·:
- push-to-production.ps1 (Windowsä¸€é”®æŽ¨é€)
- quick-deploy-optimized.sh (æœåŠ¡å™¨ä¼˜åŒ–éƒ¨ç½²)
- verify-deployment.sh (éƒ¨ç½²éªŒè¯)
- server-resource-monitor.sh (èµ„æºç›‘æŽ§)

ðŸ“š æ–‡æ¡£:
- å®Œæ•´éƒ¨ç½²æŒ‡å—å’Œå¿«é€Ÿå‘½ä»¤æ‰‹å†Œ
- æœåŠ¡å™¨ä¼˜åŒ–å’Œæ€§èƒ½åˆ†æžæŠ¥å‘Š

âš¡ æ€§èƒ½æå‡:
- æ–‡ä»¶I/Oå‡å°‘90%
- å“åº”æ—¶é—´æå‡70%
- å¹¶å‘å¤„ç†èƒ½åŠ›æå‡300%"
```

### ç¬¬äºŒæ­¥ï¼šæŽ¨é€åˆ°è¿œç¨‹ä»“åº“

```powershell
# æŽ¨é€åˆ°GitHub
git push origin master

# åˆ›å»ºç‰ˆæœ¬æ ‡ç­¾
git tag -a v1.1.0 -m "æ™ºèƒ½ç¼“å­˜å’Œæ€§èƒ½ä¼˜åŒ–ç‰ˆæœ¬ - ä¼ä¸šçº§éƒ¨ç½²å·¥å…·é›†"
git push origin v1.1.0
```

### ç¬¬ä¸‰æ­¥ï¼šä½¿ç”¨ä¸€é”®æŽ¨é€è„šæœ¬

```powershell
# é…ç½®æœåŠ¡å™¨IPåŽä½¿ç”¨ä¸€é”®æŽ¨é€
.\push-to-production.ps1 -ServerIP "your-server-ip" -Username "root"

# æˆ–è€…åˆ†æ­¥æ‰§è¡Œ
.\push-to-production.ps1  # ä»…æŽ¨é€ä»£ç 
# ç„¶åŽåœ¨æœåŠ¡å™¨æ‰§è¡Œ: sudo /usr/local/bin/diamond-update.sh update
```

---

## ðŸ“Š **ç”Ÿäº§çŽ¯å¢ƒåŒæ­¥è¯„ä¼°**

### ðŸ”„ **æœ¬åœ°ä¸Žç”Ÿäº§çŽ¯å¢ƒå·®å¼‚**

```
ä»£ç å±‚é¢:
  âœ“ æ™ºèƒ½ç¼“å­˜ç³»ç»Ÿ (æœ¬åœ°å·²å®žçŽ°ï¼Œç”Ÿäº§çŽ¯å¢ƒå¾…æ›´æ–°)
  âœ“ æ€§èƒ½ä¼˜åŒ–ä»£ç  (æœ¬åœ°å·²å®Œæˆï¼Œéœ€è¦æŽ¨é€)
  âœ“ å‰ç«¯ç»„ä»¶ä¼˜åŒ– (æœ¬åœ°å·²ä¿®æ”¹ï¼Œéœ€è¦åŒæ­¥)

å·¥å…·å±‚é¢:
  âœ“ ä¸€é”®éƒ¨ç½²è„šæœ¬ (æœ¬åœ°å·²åˆ›å»ºï¼Œéœ€è¦ä¸Šä¼ )
  âœ“ ç›‘æŽ§å’Œç®¡ç†å·¥å…· (æœ¬åœ°å·²å‡†å¤‡ï¼Œéœ€è¦éƒ¨ç½²)
  âœ“ éªŒè¯å’Œæµ‹è¯•è„šæœ¬ (æœ¬åœ°å·²å®Œæˆï¼Œéœ€è¦é…ç½®)

æ–‡æ¡£å±‚é¢:
  âœ“ å®Œæ•´éƒ¨ç½²æŒ‡å— (æœ¬åœ°å·²ç¼–å†™ï¼Œå¯ä¾›å‚è€ƒ)
  âœ“ å¿«é€Ÿå‘½ä»¤æ‰‹å†Œ (æœ¬åœ°å·²æ•´ç†ï¼Œä¾¿äºŽæ“ä½œ)
```

### ðŸŽ¯ **æŽ¨èæ›´æ–°ç­–ç•¥**

1. **ç«‹å³æ‰§è¡Œ**: æäº¤å¹¶æŽ¨é€æ‰€æœ‰æœ¬åœ°æ›´æ”¹
2. **å®‰å…¨éƒ¨ç½²**: ä½¿ç”¨é›¶åœæœºæ›´æ–°æ–¹æ¡ˆ
3. **éªŒè¯ç»“æžœ**: è¿è¡Œå®Œæ•´çš„éƒ¨ç½²éªŒè¯
4. **ç›‘æŽ§è§‚å¯Ÿ**: æŒç»­ç›‘æŽ§æ€§èƒ½æå‡æ•ˆæžœ

---

## ðŸŽ‰ **æ€»ç»“å’Œä¸‹ä¸€æ­¥è¡ŒåŠ¨**

### âœ… **å½“å‰çŠ¶æ€**

- Gitä»“åº“é…ç½®å®Œæ•´ï¼Œè¿œç¨‹ä»“åº“å¯ç”¨
- æ™ºèƒ½ç¼“å­˜ä¼˜åŒ–ä»£ç å·²å®žçŽ°
- ä¸€é”®æŽ¨é€è„šæœ¬å·²é…ç½®
- å®Œæ•´çš„éƒ¨ç½²å·¥å…·é›†å·²å‡†å¤‡

### ðŸš€ **ç«‹å³å¯æ‰§è¡Œçš„æ“ä½œ**

```powershell
# 1. æäº¤æ‰€æœ‰æ›´æ”¹
git add . && git commit -m "feat: æ™ºèƒ½ç¼“å­˜å’Œæ€§èƒ½ä¼˜åŒ–å®Œæ•´å®žçŽ°"

# 2. æŽ¨é€åˆ°è¿œç¨‹ä»“åº“
git push origin master

# 3. åˆ›å»ºç‰ˆæœ¬æ ‡ç­¾
git tag -a v1.1.0 -m "æ™ºèƒ½ç¼“å­˜ä¼˜åŒ–ç‰ˆæœ¬" && git push origin v1.1.0

# 4. ä¸€é”®æŽ¨é€åˆ°ç”Ÿäº§çŽ¯å¢ƒï¼ˆé…ç½®æœåŠ¡å™¨IPåŽï¼‰
.\push-to-production.ps1 -ServerIP "your-server-ip"
```

### ðŸ“ˆ **é¢„æœŸæ”¶ç›Š**

- **æ€§èƒ½æå‡**: å“åº”æ—¶é—´å‡å°‘70%ï¼Œå¹¶å‘èƒ½åŠ›æå‡300%
- **è¿ç»´æ•ˆçŽ‡**: ä¸€é”®éƒ¨ç½²ï¼Œè‡ªåŠ¨ç›‘æŽ§ï¼Œå¿«é€Ÿå›žæ»š
- **ç³»ç»Ÿç¨³å®šæ€§**: æ™ºèƒ½ç¼“å­˜ï¼Œèµ„æºä¼˜åŒ–ï¼Œæ•…éšœé¢„è­¦

**ðŸŽ¯ æ‚¨çš„é’»çŸ³ç½‘ç«™å·²å‡†å¤‡å¥½è¿›è¡Œä¼ä¸šçº§æ€§èƒ½å‡çº§ï¼**
