<!DOCTYPE html>
<html lang="zh-CN" data-i18n-lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-i18n="site.title">æ— é”¡çš‡å¾·å›½é™…è´¸æ˜“æœ‰é™å…¬å¸ - ä¸“ä¸šæ¶¡è½®å¢å‹å™¨å’Œå…±è½¨å–·æ²¹å™¨é…ä»¶ä¾›åº”å•†</title>
    <meta name="description" content="æ— é”¡çš‡å¾·å›½é™…è´¸æ˜“æœ‰é™å…¬å¸ä¸“ä¸šä¾›åº”æ¶¡è½®å¢å‹å™¨é…ä»¶å’Œå…±è½¨å–·æ²¹å™¨éƒ¨ä»¶ï¼Œ15å¹´è¡Œä¸šç»éªŒï¼Œå…¨çƒä¾›åº”ç½‘ç»œï¼Œå“è´¨ä¿è¯ã€‚" data-i18n="site.description" data-i18n-attr="content">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="assets/images/favicon.ico">
    <link rel="icon" type="image/png" sizes="32x32" href="assets/images/logo/diamond-logo.png">
    <link rel="apple-touch-icon" href="assets/images/logo/diamond-logo.png">
    <link rel="shortcut icon" type="image/x-icon" href="assets/images/favicon.ico">
    
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="./assets/css/font-awesome.min.css">
    
    <!-- ä¸»è¦æ ·å¼æ–‡ä»¶ -->
    <link rel="stylesheet" href="assets/css/main.css">
    
    <!-- å›½é™…åŒ–æ ·å¼ -->
    <link rel="stylesheet" href="assets/css/i18n-styles.css">

    <!-- é¡µè„šåé¦ˆå¢å¼ºæ ·å¼ -->
    <link rel="stylesheet" href="assets/css/footer-feedback-enhancement.css">

    <!-- ä¸»é¡µäº§å“å±•ç¤ºä¸“ç”¨æ ·å¼ -->
    <link rel="stylesheet" href="assets/css/homepage-products.css">

    <!-- åŠ è½½å±å¹•å’Œç‰¹æ€§æ ‡ç­¾æ ·å¼ä¼˜åŒ– -->
    <style>
        /* åŠ è½½å±å¹•æ ·å¼ */
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background: linear-gradient(135deg, #002e5f 0%, #001a3a 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            transition: all 0.5s ease;
        }

        .loading-screen.hidden {
            opacity: 0;
            visibility: hidden;
            pointer-events: none;
        }

        .loading-content {
            text-align: center;
            color: white;
        }

        .loading-logo {
            margin-bottom: 20px;
        }

        .loading-logo-img {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        .loading-company-name {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 10px;
            color: white;
        }

        .loading-subtitle {
            font-size: 16px;
            margin-bottom: 30px;
            opacity: 0.8;
        }

        .spinner {
            width: 50px;
            height: 50px;
            border: 4px solid rgba(255,255,255,0.3);
            border-top: 4px solid white;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        .loading-text {
            font-size: 14px;
            opacity: 0.7;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        /* è¦†ç›–ä¸»é¡µäº§å“å¡ç‰‡çš„ç‰¹æ€§æ ‡ç­¾æ ·å¼ */
        .feature-tag {
            background: linear-gradient(135deg, #00DC82 0%, #00b76c 100%) !important;
            color: white !important;
            padding: 6px 14px !important;
            border-radius: 20px !important;
            font-size: 12px !important;
            font-weight: 500 !important;
            box-shadow: 0 2px 8px rgba(0, 220, 130, 0.25) !important;
            letter-spacing: 0.2px !important;
            border: none !important;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif !important;
            transition: all 0.3s ease !important;
            display: inline-flex !important;
            align-items: center !important;
            justify-content: center !important;
            margin: 0 !important;
            cursor: default !important;
            text-align: center !important;
        }

        .feature-tag:hover {
            transform: translateY(-1px) !important;
            box-shadow: 0 4px 12px rgba(0, 220, 130, 0.3) !important;
            background: linear-gradient(135deg, #00b76c 0%, #009c5a 100%) !important;
        }

        .feature-tag i {
            color: rgba(255, 255, 255, 0.9) !important;
            font-size: 11px !important;
            margin-right: 2px !important;
        }

        .feature-tag .feature-text {
            font-weight: 500 !important;
            letter-spacing: 0.1px !important;
        }

        /* ç§»åŠ¨ç«¯å“åº”å¼ */
        @media (max-width: 768px) {
            .feature-tag {
                padding: 5px 12px !important;
                font-size: 11px !important;
                border-radius: 18px !important;
            }

            .feature-tag i {
                font-size: 10px !important;
            }
        }
    </style>
</head>
<body>
    <!-- ğŸš€ é¡µé¢åŠ è½½å±å¹• - åœ¨é¡µé¢å†…å®¹ä¹‹å‰æ˜¾ç¤º -->
    <div id="loading" class="loading-screen">
        <div class="loading-content">
            <div class="loading-logo">
                <img src="assets/images/logo/diamond-logo.png" alt="æ— é”¡çš‡å¾·å›½é™…è´¸æ˜“æœ‰é™å…¬å¸" class="loading-logo-img">
            </div>
            <h2 class="loading-company-name">æ— é”¡çš‡å¾·å›½é™…è´¸æ˜“æœ‰é™å…¬å¸</h2>
            <p class="loading-subtitle">ä¸“ä¸šæ¶¡è½®å¢å‹å™¨å’Œå…±è½¨å–·æ²¹å™¨é…ä»¶ä¾›åº”å•†</p>
            <div class="spinner"></div>
            <p class="loading-text">æ­£åœ¨åŠ è½½ä¸­...</p>
        </div>
    </div>

    <!-- é¡µå¤´ç»„ä»¶å®¹å™¨ -->
    <div id="header-container"></div>
    


    <!-- ä¸»è¦å†…å®¹ -->
    <main>
        <!-- è½®æ’­å›¾åŒºåŸŸ -->
        <section id="home" class="hero-section">
            <div class="container">
                <div class="carousel-container">
                    <!-- è½®æ’­å›¾å†…å®¹å°†ç”±JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                    
                    <!-- è½®æ’­å›¾æŒ‡ç¤ºå™¨ -->
                    <div class="carousel-indicators">
                        <!-- æŒ‡ç¤ºå™¨å°†ç”±JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                    </div>
                </div>
            </div>
        </section>

        <!-- äº§å“å±•ç¤ºåŒºåŸŸ -->
        <section id="products" class="products-section">
            <div class="container">
                <div class="section-header">
                    <h2 data-i18n="products.section_title">ä¸»è¦äº§å“</h2>
                    <p data-i18n="products.section_subtitle">ç²¾å¿ƒæŒ‘é€‰çš„ç²¾å“äº§å“ï¼Œä¸ºæ‚¨æä¾›æœ€æ–°çš„äº§å“é€‰æ‹©</p>
                </div>
                
                <div class="products-showcase" id="products-showcase">
                    <!-- äº§å“å°†é€šè¿‡JavaScriptä»APIåŠ¨æ€åŠ è½½ -->
                    <div class="loading-text">
                        <i class="fas fa-spinner fa-spin"></i> <span data-i18n="products.loading">æ­£åœ¨åŠ è½½æœ€æ–°äº§å“...</span>
                        <br><br>
                        <button onclick="testProductLoad()" style="padding: 10px 20px; background: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer; margin-top: 10px;">
                            ğŸ§ª æµ‹è¯•äº§å“åŠ è½½
                        </button>
                    </div>
                </div>
                
                <!-- æŸ¥çœ‹æ›´å¤šæŒ‰é’® -->
                <div class="products-more-section">
                    <a href="pages/products.html" class="btn-view-more">
                        <span data-i18n="products.view_all">æŸ¥çœ‹å…¨éƒ¨äº§å“</span>
                        <i class="fas fa-th-large"></i>
                    </a>
                    <p class="more-hint" data-i18n="products.view_all_hint">æµè§ˆå®Œæ•´äº§å“ç›®å½•ï¼ŒåŒ…å«è¯¦ç»†æŠ€æœ¯è§„æ ¼å’Œåº”ç”¨èŒƒå›´</p>
                </div>
            </div>
        </section>

        <!-- å…¬å¸ç®€ä»‹ -->
        <section class="company-intro-section">
            <div class="container">
                <div class="company-intro-content">
                    <div class="company-features">
                        <div class="feature-item">
                            <div class="feature-icon">
                                <i class="fas fa-trophy"></i>
                            </div>
                            <h4 data-i18n="company.features.0.title">15å¹´ä¸“ä¸šç»éªŒ</h4>
                            <p data-i18n="company.features.0.description">è¶…è¿‡15å¹´è¡Œä¸šä»£ç†ç»éªŒï¼Œæ·±åº¦äº†è§£å¸‚åœºéœ€æ±‚</p>
                        </div>
                        
                        <div class="feature-item">
                            <div class="feature-icon">
                                <i class="fas fa-globe"></i>
                            </div>
                            <h4 data-i18n="company.features.1.title">å…¨çƒä¾›åº”ç½‘ç»œ</h4>
                            <p data-i18n="company.features.1.description">ä¸å…¨çƒé¡¶çº§åˆ¶é€ å•†å»ºç«‹é•¿æœŸåˆä½œå…³ç³»</p>
                        </div>
                        
                        <div class="feature-item">
                            <div class="feature-icon">
                                <i class="fas fa-shield-alt"></i>
                            </div>
                            <h4 data-i18n="company.features.2.title">å“è´¨ä¿è¯</h4>
                            <p data-i18n="company.features.2.description">æ¯ä¸ªäº§å“éƒ½ç»è¿‡ä¸¥æ ¼è´¨é‡æ£€æµ‹ï¼Œç¡®ä¿æœ€é«˜æ ‡å‡†</p>
                        </div>
                    </div>
                    
                    <div class="intro-text">
                        <h2 data-i18n="company.intro_title">ã€Œå…¬å¸ç®€ä»‹ã€</h2>
                        <p class="intro-main" data-i18n="company.intro_main">æ— é”¡çš‡å¾·å›½é™…è´¸æ˜“æœ‰é™å…¬å¸æ˜¯ä¸€å®¶ä¸“ä¸šä»äº‹æ¶¡è½®å¢å‹å™¨é…ä»¶å’Œå…±è½¨å–·æ²¹å™¨éƒ¨ä»¶ä¾›åº”çš„æœåŠ¡å…¬å¸ã€‚</p>
                        <p class="intro-detail" data-i18n="company.intro_detail_1">æˆ‘ä»¬çš„ä¸“ä¸šå›¢é˜Ÿè‡´åŠ›äºä¸ºå…¨çƒå®¢æˆ·é‡‡è´­å’Œæä¾›é«˜è´¨é‡çš„æ¶¡è½®å¢å‹å™¨éƒ¨ä»¶å’Œå–·æ²¹å™¨éƒ¨ä»¶ã€‚</p>
                        <p class="intro-detail" data-i18n="company.intro_detail_2">ä¸ºå¤šä¸ªè¡Œä¸šæä¾›é«˜æ€§èƒ½çš„æ±½è½¦é›¶éƒ¨ä»¶è§£å†³æ–¹æ¡ˆã€‚</p>
                        <p class="intro-detail" data-i18n="company.intro_detail_3">è¶…è¿‡15å¹´çš„ä»£ç†ç»éªŒï¼Œç¡®ä¿æ¯ä¸€ä¸ªäº§å“éƒ½ç¬¦åˆæœ€é«˜çš„è´¨é‡æ ‡å‡†ã€‚</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- è”ç³»æˆ‘ä»¬ -->
        <section id="contact" class="contact-section">
            <div class="container">
                <div class="section-header">
                    <h2 data-i18n="contact.section_title">è”ç³»æˆ‘ä»¬</h2>
                    <p data-i18n="contact.section_subtitle">ç«‹å³è”ç³»æˆ‘ä»¬è·å–ä¸“ä¸šçš„äº§å“å’¨è¯¢å’ŒæŠ¥ä»·æœåŠ¡</p>
                </div>
                
                <!-- è”ç³»ä¿¡æ¯å¡ç‰‡è¡Œ - å¹¶åˆ—æ˜¾ç¤º -->
                <div class="contact-info-row">
                    <div class="contact-item">
                        <div class="contact-icon">
                            <i class="fas fa-building"></i>
                        </div>
                        <div class="contact-details">
                            <h4 data-i18n="contact.info.address">åœ°å€</h4>
                            <p id="company-address">æ­£åœ¨åŠ è½½...</p>
                            <p class="postal-code" id="company-postal-code">é‚®ç¼–: æ­£åœ¨åŠ è½½...</p>
                        </div>
                    </div>
                    
                    <div class="contact-item">
                        <div class="contact-icon">
                            <i class="fas fa-phone"></i>
                        </div>
                        <div class="contact-details">
                            <h4 data-i18n="contact.info.phone">ç”µè¯</h4>
                            <p id="company-phone">æ­£åœ¨åŠ è½½...</p>
                            <a href="tel:" id="company-phone-link" class="btn-contact" data-i18n="contact.actions.call">ç«‹å³é€šè¯</a>
                        </div>
                    </div>
                    
                    <div class="contact-item">
                        <div class="contact-icon">
                            <i class="fab fa-whatsapp"></i>
                        </div>
                        <div class="contact-details">
                            <h4 data-i18n="contact.info.whatsapp">WhatsApp</h4>
                            <p id="company-whatsapp">æ­£åœ¨åŠ è½½...</p>
                            <a href="https://wa.me/" id="company-whatsapp-link" class="btn-contact" target="_blank" data-i18n="contact.actions.whatsapp">WhatsAppè”ç³»</a>
                        </div>
                    </div>
                    
                    <div class="contact-item">
                        <div class="contact-icon">
                            <i class="fas fa-envelope"></i>
                        </div>
                        <div class="contact-details">
                            <h4 data-i18n="contact.info.email">é‚®ç®±</h4>
                            <p id="company-email">æ­£åœ¨åŠ è½½...</p>
                            <a href="mailto:" id="company-email-link" class="btn-contact" data-i18n="contact.actions.email">å‘é€é‚®ä»¶</a>
                        </div>
                    </div>
                </div>
                
                <!-- åœ°å›¾å’Œè¡¨å•åŒºåŸŸ - å·¦å³åˆ†å¸ƒ -->
                <div class="contact-layout">
                    <!-- å·¦ä¾§ï¼šåœ°å›¾ -->
                    <div class="contact-left">
                        <div class="map-container">
                            <div class="map-overlay">
                                <i class="fas fa-map-marker-alt" style="color: #007bff; font-size: 16px;"></i>
                                <span data-i18n="contact.company_name">æ— é”¡çš‡å¾·å›½é™…è´¸æ˜“æœ‰é™å…¬å¸</span>
                            </div>
                            <iframe
                                src="https://maps.google.com/maps?q=31.691717,120.486254&z=16&output=embed&hl=zh-CN&markers=color:red%7Clabel:çš‡%7C31.691717,120.486254"
                                width="100%"
                                height="400"
                                style="border:0; border-radius: 15px;"
                                allowfullscreen=""
                                loading="lazy"
                                referrerpolicy="no-referrer-when-downgrade">
                            </iframe>
                        </div>
                    </div>
                    
                    <!-- å³ä¾§ï¼šè¯¢ä»·è¡¨å• -->
                    <div class="contact-right">
                        <div class="inquiry-form-container">
                            <h3 data-i18n="contact.form_title">å‘é€è¯¢ä»·ä¿¡æ¯</h3>
                            <p class="form-description" data-i18n="contact.form_description">è¯·å¡«å†™ä»¥ä¸‹ä¿¡æ¯ï¼Œæˆ‘ä»¬å°†åœ¨24å°æ—¶å†…å›å¤æ‚¨</p>
                            
                            <form class="inquiry-form" id="inquiryForm" method="POST" action="javascript:void(0)" onsubmit="return false;">
                                <!-- ç¬¬ä¸€è¡Œï¼šå§“åå’Œé‚®ç®±å¹¶æ’ -->
                                <div class="form-row">
                                    <div class="form-group half-width">
                                        <input type="text" id="inquiryName" name="name" data-i18n="contact.fields.name" data-i18n-attr="placeholder" placeholder="æ‚¨çš„å§“å *" required
                                               pattern="^[a-zA-Z\u4e00-\u9fa5\s\-\.]{2,30}$"
                                               data-error="è¯·è¾“å…¥2-30ä¸ªå­—ç¬¦çš„æœ‰æ•ˆå§“åï¼Œæ”¯æŒä¸­è‹±æ–‡ã€ç©ºæ ¼ã€è¿å­—ç¬¦">
                                        <div class="error-message"></div>
                                    </div>
                                    
                                    <div class="form-group half-width">
                                        <input type="email" id="inquiryEmail" name="email" data-i18n="contact.fields.email" data-i18n-attr="placeholder" placeholder="é‚®ç®±åœ°å€ *" required
                                               pattern="[a-z0-9._%+\-]+@[a-z0-9.\-]+\.[a-z]{2,}$"
                                               data-error="è¯·è¾“å…¥æœ‰æ•ˆçš„é‚®ç®±åœ°å€">
                                        <div class="error-message"></div>
                                    </div>
                                </div>
                                
                                <!-- ç¬¬äºŒè¡Œï¼šè”ç³»ç”µè¯å’Œå…¬å¸åç§°å¹¶æ’ -->
                                <div class="form-row">
                                    <div class="form-group half-width">
                                        <input type="tel" id="inquiryPhone" name="phone" data-i18n="contact.fields.phone" data-i18n-attr="placeholder" placeholder="è”ç³»ç”µè¯"
                                               pattern="[\d\s\-\+\(\)]{7,20}"
                                               data-error="è¯·è¾“å…¥æœ‰æ•ˆçš„ç”µè¯å·ç ">
                                        <div class="error-message"></div>
                                    </div>
                                    
                                    <div class="form-group half-width">
                                        <input type="text" id="inquiryCompany" name="company" data-i18n="contact.fields.company" data-i18n-attr="placeholder" placeholder="å…¬å¸åç§°">
                                    </div>
                                </div>
                                
                                <!-- ç¬¬ä¸‰è¡Œï¼šè¯¦ç»†éœ€æ±‚ï¼ˆå æ»¡æ•´è¡Œï¼‰ -->
                                <div class="form-group full-width">
                                    <textarea id="inquiryMessage" name="message" rows="4" data-i18n="contact.fields.message_placeholder" data-i18n-attr="placeholder" placeholder="è¯¦ç»†éœ€æ±‚ * - è¯·è¯¦ç»†æè¿°æ‚¨çš„éœ€æ±‚ï¼ŒåŒ…æ‹¬äº§å“å‹å·ã€æ•°é‡ç­‰" required
                                              minlength="10" maxlength="1000"
                                              data-error="éœ€æ±‚æè¿°è‡³å°‘10ä¸ªå­—ç¬¦"></textarea>
                                    <div class="error-message"></div>
                                </div>
                                
                                <button type="submit" class="btn-submit">
                                    <i class="fas fa-paper-plane"></i>
                                    <span data-i18n="contact.submit">æäº¤è¯¢ä»·</span>
                                </button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- é¡µè„šç»„ä»¶å®¹å™¨ -->
    <div id="footer-container"></div>



    <!-- ğŸ”§ æ—©æœŸè¯­è¨€æ£€æµ‹è„šæœ¬ - åœ¨æ‰€æœ‰å…¶ä»–è„šæœ¬ä¹‹å‰æ‰§è¡Œï¼Œé¿å…è¯­è¨€é—ªçƒ -->
    <script>
        (function() {
            'use strict';
            console.log('ğŸŒ æ—©æœŸè¯­è¨€æ£€æµ‹å¼€å§‹...');

            // æ£€æµ‹ç”¨æˆ·åå¥½è¯­è¨€
            const preferredLang = localStorage.getItem('preferred-language') ||
                                 (navigator.language || navigator.userLanguage || 'zh-CN');

            console.log('ğŸŒ æ£€æµ‹åˆ°ç”¨æˆ·åå¥½è¯­è¨€:', preferredLang);

            // ç«‹å³è®¾ç½®HTML langå±æ€§ï¼Œé¿å…é—ªçƒ
            const langCode = preferredLang.split('-')[0];
            document.documentElement.lang = langCode;

            // åœ¨windowå¯¹è±¡ä¸Šè®¾ç½®æ—©æœŸè¯­è¨€ä¿¡æ¯ï¼Œä¾›åç»­è„šæœ¬ä½¿ç”¨
            window.earlyLanguageDetection = {
                preferredLanguage: preferredLang,
                langCode: langCode,
                timestamp: Date.now()
            };

            console.log('âœ… æ—©æœŸè¯­è¨€æ£€æµ‹å®Œæˆï¼ŒHTML langå·²è®¾ç½®ä¸º:', langCode);
        })();
    </script>

    <!-- ğŸš€ ç»Ÿä¸€é¡µé¢åŠ è½½ç®¡ç†å™¨ - å¿…é¡»æœ€å…ˆåŠ è½½ -->
    <script src="assets/js/page-load-manager.js"></script>

    <!-- ğŸ¨ WebPå›¾ç‰‡ä¼˜åŒ–åŠ è½½å™¨ -->
    <script src="assets/js/webp-loader.js"></script>

    <!-- ğŸŒ å›½é™…åŒ–ç®¡ç†å™¨ -->
    <script src="assets/js/i18n-manager.js"></script>

    <!-- ğŸ” SEOç»“æ„åŒ–æ•°æ®ç®¡ç†å™¨ -->
    <script src="assets/js/seo-structured-data.js"></script>

    <!-- ğŸ”§ ç»Ÿä¸€ç»„ä»¶ç®¡ç†ç³»ç»Ÿ -->
    <script src="assets/js/modules/services/company-service.js"></script>
    <script src="assets/js/modules/components/component-manager.js"></script>
    <script src="assets/js/unified-component-loader.js"></script>

    <!-- ğŸ  æ¨¡å—åŒ–åŠŸèƒ½ç»„ä»¶ -->
    <script src="assets/js/modules/carousel-manager.js"></script>
    <script src="assets/js/modules/utils.js"></script>

    <!-- äº§å“æ’åºå·¥å…·ç±» -->
    <script src="assets/js/product-sort-utils.js"></script>

    <!-- ğŸ†• ç»Ÿä¸€äº§å“å¡ç‰‡ç®¡ç†å™¨ -->
    <script src="assets/js/modules/components/product-card-manager.js"></script>

    <!-- äº§å“å¡ç»„ä»¶ï¼ˆå…¼å®¹ç‰ˆæœ¬ï¼‰ -->
    <script src="assets/js/product-card-component.js"></script>

    <!-- ç½‘ç«™åˆ†æç»Ÿè®¡è„šæœ¬ -->
    <script src="assets/js/analytics.js"></script>
    
    <!-- ä¸»è¦è„šæœ¬æ–‡ä»¶ï¼ˆç®€åŒ–ç‰ˆï¼‰ -->
    <script src="assets/js/main.js"></script>

    <!-- ğŸ”§ æœç´¢åŠŸèƒ½ä¿®å¤æ¨¡å— -->
    <script src="assets/js/search-fix.js"></script>

    <!-- ğŸš€ é¡µé¢å¯¼èˆªä¼˜åŒ–å™¨ -->
    <script src="assets/js/navigation-optimizer.js"></script>

    <!-- ğŸ” æ€§èƒ½ç›‘æ§å™¨ -->
    <script src="assets/js/performance-monitor.js"></script>

    <script>
        // ğŸ  ä½¿ç”¨é¡µé¢åŠ è½½ç®¡ç†å™¨ç»Ÿä¸€åˆå§‹åŒ–ï¼ˆç§»é™¤é‡å¤çš„DOMContentLoadedï¼‰
        if (window.PageLoadManager) {
            window.PageLoadManager.addToQueue('homepage-init', function() {
                console.log('ğŸ  ä¸»é¡µåˆå§‹åŒ–å¼€å§‹');

                // å»¶è¿Ÿæ‰§è¡Œï¼Œç¡®ä¿æ‰€æœ‰è„šæœ¬åŠ è½½å®Œæˆ
                setTimeout(function() {
                    console.log('ğŸš€ å¼€å§‹è‡ªåŠ¨åˆå§‹åŒ–äº§å“å±•ç¤º...');
                    initHomepageProducts();
                }, 200); // å‡å°‘å»¶è¿Ÿæ—¶é—´ï¼Œæå‡å“åº”é€Ÿåº¦
            }, ['domReady']);
        } else {
            // å¤‡ç”¨æ–¹æ¡ˆï¼šä¼ ç»Ÿæ–¹å¼
            document.addEventListener('DOMContentLoaded', function() {
                console.log('ğŸ  ä¸»é¡µåˆå§‹åŒ–å¼€å§‹ï¼ˆå¤‡ç”¨æ–¹æ¡ˆï¼‰');
                setTimeout(function() {
                    initHomepageProducts();
                }, 500);
            });
        }

        // ğŸ¯ ç»Ÿä¸€çš„ä¸»é¡µäº§å“åˆå§‹åŒ–å‡½æ•°
        async function initHomepageProducts() {
            const showcase = document.getElementById('products-showcase');
            if (!showcase) {
                console.log('âŒ äº§å“å±•ç¤ºå®¹å™¨æœªæ‰¾åˆ°');
                return;
            }

            console.log('ğŸš€ å¼€å§‹åŠ è½½ä¸»é¡µäº§å“...');

            // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
            showcase.innerHTML = `
                <div class="loading-text" style="text-align: center; padding: 40px; color: #6c757d;">
                    <i class="fas fa-spinner fa-spin" style="font-size: 24px; margin-bottom: 10px;"></i>
                    <br><span data-i18n="products.loading">æ­£åœ¨åŠ è½½æœ€æ–°äº§å“...</span>
                </div>
            `;

            try {
                const response = await fetch('/api/public/products?limit=9');
                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }

                const result = await response.json();
                const products = result.data || result;

                if (!Array.isArray(products) || products.length === 0) {
                    throw new Error('æ²¡æœ‰å¯ç”¨çš„äº§å“æ•°æ®');
                }

                const activeProducts = products.filter(p => p.status === 'active').slice(0, 9);
                console.log(`âœ… è·å–åˆ° ${activeProducts.length} ä¸ªæ´»è·ƒäº§å“`);

                // ä¿å­˜åˆ°å…¨å±€å˜é‡ä¾›å…¶ä»–åŠŸèƒ½ä½¿ç”¨
                window.featuredProducts = activeProducts;

                // æ¸²æŸ“äº§å“å¡ç‰‡
                renderHomepageProducts(activeProducts, showcase);

                console.log('ğŸ‰ ä¸»é¡µäº§å“å±•ç¤ºåŠ è½½å®Œæˆ');

            } catch (error) {
                console.error('âŒ äº§å“åŠ è½½å¤±è´¥:', error);
                showcase.innerHTML = `
                    <div class="loading-text" style="color: #dc3545; text-align: center; padding: 40px;">
                        <i class="fas fa-exclamation-triangle" style="font-size: 24px; margin-bottom: 10px;"></i>
                        <br>äº§å“åŠ è½½å¤±è´¥: ${error.message}
                        <br><button onclick="initHomepageProducts()" class="btn-retry"
                            style="margin-top: 15px; padding: 10px 20px; background: #007bff; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 14px;">
                            <i class="fas fa-redo"></i> é‡è¯•åŠ è½½
                        </button>
                    </div>
                `;
            }
        }

        // ğŸ¨ æ¸²æŸ“ä¸»é¡µäº§å“å‡½æ•°
        function renderHomepageProducts(products, container) {
            console.log('ğŸ¨ å¼€å§‹æ¸²æŸ“ä¸»é¡µäº§å“å¡ç‰‡', products);
            console.log('ğŸ” äº§å“å¡ç»„ä»¶çŠ¶æ€:', {
                exists: !!window.productCardComponent,
                hasRenderMethod: !!(window.productCardComponent && typeof window.productCardComponent.renderToShowcase === 'function')
            });

            // ç›´æ¥ä½¿ç”¨å¤‡ç”¨æ¸²æŸ“æ–¹æ¡ˆï¼Œç¡®ä¿äº§å“èƒ½å¤Ÿæ˜¾ç¤º
            console.log('âœ… ä½¿ç”¨ç›´æ¥æ¸²æŸ“æ–¹æ¡ˆ');
            renderProductCardsDirectly(products, container);
        }

        // ğŸ¨ ç›´æ¥æ¸²æŸ“äº§å“å¡ç‰‡ï¼ˆå¤‡ç”¨æ–¹æ¡ˆï¼‰
        function renderProductCardsDirectly(products, container) {
            const html = products.map(product => createProductCardHTML(product)).join('');
            container.innerHTML = html;
            console.log('âœ… ç›´æ¥æ¸²æŸ“å®Œæˆ');
        }

        // ğŸ—ï¸ åˆ›å»ºäº§å“å¡ç‰‡HTML
        function createProductCardHTML(product) {
            const features = product.features ? product.features.split(',').slice(0, 3) : [];
            const imageUrl = product.image || 'assets/images/carousel/img1.jpg';

            return `
                <div class="product-showcase-card">
                    ${product.isNew ? '<div class="product-badge new">æ–°å“</div>' : ''}
                    ${product.isHot ? '<div class="product-badge hot">çƒ­é—¨</div>' : ''}
                    ${product.isRecommend ? '<div class="product-badge recommend">æ¨è</div>' : ''}

                    <div class="product-image-container">
                        <a href="pages/product-detail.html?id=${product.id}" class="product-image-link">
                            <img src="${imageUrl}" alt="${product.name}" class="product-image"
                                 onerror="this.src='assets/images/carousel/img1.jpg'">
                        </a>
                    </div>

                    <div class="product-info">
                        <div class="product-brand">${product.brand || 'çš‡å¾·å›½é™…'}</div>
                        <h3 class="product-name">${product.name}</h3>
                        <div class="product-model">${product.model || 'æš‚æ— å‹å·'}</div>

                        ${features.length > 0 ? `
                            <div class="product-features">
                                ${features.map(feature => `
                                    <span class="feature-tag">
                                        <i class="fas fa-check"></i>
                                        <span class="feature-text">${feature.trim()}</span>
                                    </span>
                                `).join('')}
                            </div>
                        ` : ''}

                        <div class="product-buttons">
                            <a href="pages/product-detail.html?id=${product.id}" class="product-btn btn-detail">
                                <i class="fas fa-info-circle"></i>
                                <span data-i18n="product.view_details">æŸ¥çœ‹è¯¦æƒ…</span>
                            </a>
                            <a href="https://wa.me/8613656157230?text=æˆ‘å¯¹äº§å“${encodeURIComponent(product.name)}æ„Ÿå…´è¶£ï¼Œè¯·æä¾›æ›´å¤šä¿¡æ¯"
                               target="_blank" class="product-btn btn-inquiry">
                                <i class="fab fa-whatsapp"></i>
                                <span data-i18n="product.inquire">ç«‹å³è¯¢ä»·</span>
                            </a>
                        </div>
                    </div>
                </div>
            `;
        }

        // ğŸ  ä¸»é¡µå…¶ä»–åŠŸèƒ½åˆå§‹åŒ–
        function initOtherHomepageFeatures() {
            console.log('ğŸ  ä¸»é¡µå…¶ä»–åŠŸèƒ½åˆå§‹åŒ–');

            // ğŸ“ åˆå§‹åŒ–å…¬å¸ä¿¡æ¯
            setTimeout(async function() {
                try {
                    if (window.companyService) {
                        await window.companyService.loadCompanyInfo();
                        window.companyService.updatePageElements();
                        console.log('âœ… å…¬å¸ä¿¡æ¯å·²æ›´æ–°');
                    }
                } catch (error) {
                    console.error('âŒ åŠ è½½å…¬å¸ä¿¡æ¯å¤±è´¥:', error);
                }
            }, 200);

            // ğŸ“ åˆå§‹åŒ–è”ç³»è¡¨å•
            setTimeout(function() {
                try {
                    if (typeof window.initContactForms === 'function') {
                        window.initContactForms();
                        console.log('âœ… è”ç³»è¡¨å•åˆå§‹åŒ–å®Œæˆ');
                    }
                } catch (error) {
                    console.error('âŒ è”ç³»è¡¨å•åˆå§‹åŒ–å¤±è´¥:', error);
                }
            }, 300);
        }

        // ğŸ§ª æµ‹è¯•äº§å“åŠ è½½å‡½æ•°
        window.testProductLoad = async function() {
            console.log('ğŸ§ª æ‰‹åŠ¨æµ‹è¯•äº§å“åŠ è½½...');
            const showcase = document.getElementById('products-showcase');
            if (!showcase) {
                console.error('âŒ æ‰¾ä¸åˆ°äº§å“å±•ç¤ºå®¹å™¨');
                return;
            }

            showcase.innerHTML = `
                <div style="text-align: center; padding: 20px; color: #007bff;">
                    <i class="fas fa-spinner fa-spin"></i> æ­£åœ¨æ‰‹åŠ¨æµ‹è¯•APIè°ƒç”¨...
                </div>
            `;

            try {
                console.log('ğŸ“¡ å¼€å§‹APIè°ƒç”¨...');
                const response = await fetch('/api/public/products?limit=9');
                console.log('ğŸ“¡ APIå“åº”çŠ¶æ€:', response.status, response.statusText);

                const result = await response.json();
                console.log('ğŸ“¦ APIè¿”å›æ•°æ®:', result);

                const products = result.data || result;
                console.log('ğŸ¯ å¤„ç†åçš„äº§å“æ•°æ®:', products);

                if (!Array.isArray(products) || products.length === 0) {
                    throw new Error('æ²¡æœ‰å¯ç”¨çš„äº§å“æ•°æ®');
                }

                // ç›´æ¥æ¸²æŸ“äº§å“
                renderProductCardsDirectly(products, showcase);
                console.log('âœ… æ‰‹åŠ¨æµ‹è¯•å®Œæˆ');

            } catch (error) {
                console.error('âŒ æ‰‹åŠ¨æµ‹è¯•å¤±è´¥:', error);
                showcase.innerHTML = `
                    <div style="text-align: center; padding: 20px; color: #dc3545;">
                        âŒ æµ‹è¯•å¤±è´¥: ${error.message}
                        <br><button onclick="testProductLoad()" style="margin-top: 10px; padding: 8px 16px; background: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer;">é‡è¯•</button>
                    </div>
                `;
            }
        };

        // åœ¨DOMåŠ è½½å®Œæˆååˆå§‹åŒ–å…¶ä»–åŠŸèƒ½
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(initOtherHomepageFeatures, 500);
        });
        
        // è½®æ’­å›¾ç‚¹å‡»å¯¼èˆªåˆ°äº§å“é¡µé¢
        function navigateToProducts(category) {
            window.location.href = `pages/products.html?category=${category}`;
        }

        // åœ°å›¾é…ç½® - å…¬å¸ç²¾ç¡®åæ ‡
        const MAP_CONFIG = {
            // å…¬å¸åæ ‡ - æ— é”¡å¸‚é”¡å±±åŒºä¸œæ¸¯é•‡é»„åœŸå¡˜æ‘å·¥ä¸šå›­åŒºåˆ›ä¸šè·¯107å·
            latitude: 31.691717,  // çº¬åº¦ (åŒ—çº¬) - ç²¾ç¡®åæ ‡
            longitude: 120.486254, // ç»åº¦ (ä¸œç») - ç²¾ç¡®åæ ‡
            zoom: 16,             // ç¼©æ”¾çº§åˆ«
            companyName: 'æ— é”¡çš‡å¾·å›½é™…è´¸æ˜“æœ‰é™å…¬å¸'
        };

        // åœ°å›¾è¯­è¨€åˆ‡æ¢åŠŸèƒ½
        function updateMapLanguage() {
            const iframe = document.querySelector('.map-container iframe');
            if (!iframe) return;

            const currentLangInfo = window.i18nManager?.getCurrentLanguage() || 'zh-CN';
            const currentLang = currentLangInfo.code || currentLangInfo; // å…¼å®¹æ–°æ—§ç‰ˆæœ¬
            const coords = `${MAP_CONFIG.latitude},${MAP_CONFIG.longitude}`;
            const zoom = MAP_CONFIG.zoom;

            let mapUrl;
            if (currentLang === 'en-US') {
                // è‹±æ–‡åœ°å›¾ - ä½¿ç”¨ç²¾ç¡®åæ ‡
                mapUrl = `https://maps.google.com/maps?q=${coords}&z=${zoom}&output=embed&hl=en&markers=color:red%7Clabel:H%7C${coords}`;
            } else {
                // ä¸­æ–‡åœ°å›¾ - ä½¿ç”¨ç²¾ç¡®åæ ‡
                mapUrl = `https://maps.google.com/maps?q=${coords}&z=${zoom}&output=embed&hl=zh-CN&markers=color:red%7Clabel:çš‡%7C${coords}`;
            }

            iframe.src = mapUrl;
        }

        // ç›‘å¬è¯­è¨€åˆ‡æ¢äº‹ä»¶
        document.addEventListener('i18n:changed', updateMapLanguage);

        // åœ°å›¾è°ƒè¯•åŠŸèƒ½ - åœ¨æ§åˆ¶å°ä¸­ä½¿ç”¨
        window.updateMapCoords = function(lat, lng, zoom = 16) {
            MAP_CONFIG.latitude = lat;
            MAP_CONFIG.longitude = lng;
            MAP_CONFIG.zoom = zoom;
            updateMapLanguage();
            console.log(`ğŸ—ºï¸ åœ°å›¾åæ ‡å·²æ›´æ–°: ${lat}, ${lng}, ç¼©æ”¾: ${zoom}`);
            console.log(`ğŸ“ ä½¿ç”¨æ–¹æ³•: updateMapCoords(çº¬åº¦, ç»åº¦, ç¼©æ”¾çº§åˆ«)`);
        };

        // æ˜¾ç¤ºå½“å‰åœ°å›¾é…ç½®
        window.showMapConfig = function() {
            console.log('ğŸ—ºï¸ å½“å‰åœ°å›¾é…ç½®:', MAP_CONFIG);
            console.log(`ğŸ“ åæ ‡: ${MAP_CONFIG.latitude}, ${MAP_CONFIG.longitude}`);
            console.log(`ğŸ” ç¼©æ”¾: ${MAP_CONFIG.zoom}`);
        };

        // ğŸŒ ç›‘å¬è¯­è¨€åˆ‡æ¢äº‹ä»¶ï¼Œé‡æ–°æ›´æ–°è”ç³»ä¿¡æ¯å’Œäº§å“å¡ç‰‡
        document.addEventListener('i18n:changed', function(event) {
            console.log('ğŸŒ ä¸»é¡µç›‘å¬åˆ°è¯­è¨€åˆ‡æ¢äº‹ä»¶:', event.detail);

            // é‡æ–°æ›´æ–°è”ç³»ä¿¡æ¯ï¼ˆåŒ…æ‹¬åœ°å€ç¿»è¯‘ï¼‰
            if (window.companyService) {
                console.log('ğŸ“ é‡æ–°æ›´æ–°è”ç³»ä¿¡æ¯...');
                window.companyService.updatePageElements();

                // éªŒè¯æ›´æ–°
                setTimeout(() => {
                    const addressElement = document.getElementById('company-address');
                    if (addressElement) {
                        console.log('âœ… åœ°å€å·²æ›´æ–°ä¸º:', addressElement.innerHTML);
                    }
                }, 100);
            }

            // é‡æ–°æ¸²æŸ“äº§å“å¡ç‰‡ï¼ˆæ›´æ–°ç‰¹æ€§æ ‡ç­¾ç¿»è¯‘ï¼‰
            if (window.productCardComponent && window.featuredProducts) {
                console.log('ğŸ·ï¸ é‡æ–°æ¸²æŸ“äº§å“å¡ç‰‡...');
                setTimeout(() => {
                    window.productCardComponent.renderToShowcase(
                        window.featuredProducts,
                        {
                            showDescription: false,
                            imagePath: ''
                        }
                    );
                    console.log('âœ… äº§å“å¡ç‰‡å·²é‡æ–°æ¸²æŸ“');
                }, 200);
            }
        });

        // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–åœ°å›¾è¯­è¨€
        document.addEventListener('DOMContentLoaded', () => {
            setTimeout(updateMapLanguage, 1000); // å»¶è¿Ÿç¡®ä¿i18nç®¡ç†å™¨å·²åŠ è½½
        });
        

    </script>
    <script src="./assets/js/resource-checker.js"></script>
</body>
</html> 