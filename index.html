<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
      æ— é”¡çš‡å¾·å›½é™…è´¸æ˜“æœ‰é™å…¬å¸ - ä¸“ä¸šæ¶¡è½®å¢å‹å™¨å’Œå…±è½¨å–·æ²¹å™¨é…ä»¶ä¾›åº”å•†
    </title>
    <meta
      name="description"
      content="æ— é”¡çš‡å¾·å›½é™…è´¸æ˜“æœ‰é™å…¬å¸ä¸“ä¸šä¾›åº”æ¶¡è½®å¢å‹å™¨é…ä»¶å’Œå…±è½¨å–·æ²¹å™¨éƒ¨ä»¶ï¼Œ15å¹´è¡Œä¸šç»éªŒï¼Œå…¨çƒä¾›åº”ç½‘ç»œï¼Œå“è´¨ä¿è¯ã€‚"
    />

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="assets/images/favicon.ico" />
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="assets/images/logo/diamond-logo.png"
    />
    <link rel="apple-touch-icon" href="assets/images/logo/diamond-logo.png" />
    <link
      rel="shortcut icon"
      type="image/x-icon"
      href="assets/images/favicon.ico"
    />

    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="./assets/css/font-awesome.min.css" />

    <!-- ä¸»è¦æ ·å¼æ–‡ä»¶ -->
    <link rel="stylesheet" href="assets/css/main.css" />



    <!-- é¡µè„šåé¦ˆå¢å¼ºæ ·å¼ -->
    <link rel="stylesheet" href="assets/css/footer-feedback-enhancement.css" />

    <!-- ğŸ”§ é¡µè„šç™½è‰²æ¡ä¿®å¤æ ·å¼ -->
    <link rel="stylesheet" href="assets/css/footer-fix.css" />

    <!-- ğŸ¯ å¸ƒå±€é—´è·ä¿®å¤æ ·å¼ -->
    <link rel="stylesheet" href="assets/css/layout-spacing-fix.css" />

    <!-- ä¸»é¡µäº§å“å±•ç¤ºä¸“ç”¨æ ·å¼ -->
    <link rel="stylesheet" href="assets/css/homepage-products.css" />

    <!-- ç‰¹æ€§æ ‡ç­¾æ ·å¼ä¼˜åŒ– -->
    <style>
      /* è¦†ç›–ä¸»é¡µäº§å“å¡ç‰‡çš„ç‰¹æ€§æ ‡ç­¾æ ·å¼ */
      .feature-tag {
        background: linear-gradient(
          135deg,
          #00dc82 0%,
          #00b76c 100%
        ) !important;
        color: white !important;
        padding: 6px 14px !important;
        border-radius: 20px !important;
        font-size: 12px !important;
        font-weight: 500 !important;
        box-shadow: 0 2px 8px rgba(0, 220, 130, 0.25) !important;
        letter-spacing: 0.2px !important;
        border: none !important;
        font-family:
          -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif !important;
        transition: all 0.3s ease !important;
        display: inline-flex !important;
        align-items: center !important;
        justify-content: center !important;
        margin: 0 !important;
        cursor: default !important;
        text-align: center !important;
      }

      .feature-tag:hover {
        transform: translateY(-1px) !important;
        box-shadow: 0 4px 12px rgba(0, 220, 130, 0.3) !important;
        background: linear-gradient(
          135deg,
          #00b76c 0%,
          #009c5a 100%
        ) !important;
      }

      .feature-tag i {
        color: rgba(255, 255, 255, 0.9) !important;
        font-size: 11px !important;
        margin-right: 2px !important;
      }

      .feature-tag .feature-text {
        font-weight: 500 !important;
        letter-spacing: 0.1px !important;
      }

      /* ç§»åŠ¨ç«¯å“åº”å¼ */
      @media (max-width: 768px) {
        .feature-tag {
          padding: 5px 12px !important;
          font-size: 11px !important;
          border-radius: 18px !important;
        }

        .feature-tag i {
          font-size: 10px !important;
        }
      }
    </style>
  </head>
  <body>
    <!-- é¡µå¤´ç»„ä»¶å®¹å™¨ -->
    <div id="header-container"></div>

    <!-- ä¸»è¦å†…å®¹ -->
    <main>
      <!-- è½®æ’­å›¾åŒºåŸŸ -->
      <section id="home" class="hero-section">
        <div class="container">
          <div class="carousel-container">
            <!-- è½®æ’­å›¾å†…å®¹å°†ç”±JavaScriptåŠ¨æ€ç”Ÿæˆ -->

            <!-- è½®æ’­å›¾æŒ‡ç¤ºå™¨ -->
            <div class="carousel-indicators">
              <!-- æŒ‡ç¤ºå™¨å°†ç”±JavaScriptåŠ¨æ€ç”Ÿæˆ -->
            </div>
          </div>
        </div>
      </section>

      <!-- äº§å“å±•ç¤ºåŒºåŸŸ -->
      <section id="products" class="products-section">
        <div class="container">
          <div class="section-header">
            <h2>ä¸»è¦äº§å“</h2>
            <p>
              ç²¾å¿ƒæŒ‘é€‰çš„ç²¾å“äº§å“ï¼Œä¸ºæ‚¨æä¾›æœ€æ–°çš„äº§å“é€‰æ‹©
            </p>
          </div>

          <div class="products-showcase" id="products-showcase">
            <!-- äº§å“å°†é€šè¿‡JavaScriptä»APIåŠ¨æ€åŠ è½½ -->
            <div class="loading-text">
              <i class="fas fa-spinner fa-spin"></i>
              <span>æ­£åœ¨åŠ è½½æœ€æ–°äº§å“...</span>
              <br /><br />
              <button
                onclick="testProductLoad()"
                style="
                  padding: 10px 20px;
                  background: #007bff;
                  color: white;
                  border: none;
                  border-radius: 5px;
                  cursor: pointer;
                  margin-top: 10px;
                "
              >
                ğŸ§ª æµ‹è¯•äº§å“åŠ è½½
              </button>
            </div>
          </div>

          <!-- æŸ¥çœ‹æ›´å¤šæŒ‰é’® -->
          <div class="products-more-section">
            <a href="pages/products.html" class="btn-view-more">
              <span>æŸ¥çœ‹å…¨éƒ¨äº§å“</span>
              <i class="fas fa-th-large"></i>
            </a>
            <p class="more-hint">
              æµè§ˆå®Œæ•´äº§å“ç›®å½•ï¼ŒåŒ…å«è¯¦ç»†æŠ€æœ¯è§„æ ¼å’Œåº”ç”¨èŒƒå›´
            </p>
          </div>
        </div>
      </section>

      <!-- å…¬å¸ç®€ä»‹ -->
      <section class="company-intro-section">
        <div class="container">
          <div class="company-intro-content">
            <div class="company-features">
              <div class="feature-item">
                <div class="feature-icon">
                  <i class="fas fa-trophy"></i>
                </div>
                <h4>15å¹´ä¸“ä¸šç»éªŒ</h4>
                <p>
                  è¶…è¿‡15å¹´è¡Œä¸šä»£ç†ç»éªŒï¼Œæ·±åº¦äº†è§£å¸‚åœºéœ€æ±‚
                </p>
              </div>

              <div class="feature-item">
                <div class="feature-icon">
                  <i class="fas fa-globe"></i>
                </div>
                <h4>å…¨çƒä¾›åº”ç½‘ç»œ</h4>
                <p>
                  ä¸å…¨çƒé¡¶çº§åˆ¶é€ å•†å»ºç«‹é•¿æœŸåˆä½œå…³ç³»
                </p>
              </div>

              <div class="feature-item">
                <div class="feature-icon">
                  <i class="fas fa-shield-alt"></i>
                </div>
                <h4>å“è´¨ä¿è¯</h4>
                <p>
                  æ¯ä¸ªäº§å“éƒ½ç»è¿‡ä¸¥æ ¼è´¨é‡æ£€æµ‹ï¼Œç¡®ä¿æœ€é«˜æ ‡å‡†
                </p>
              </div>
            </div>

            <div class="intro-text">
              <h2>ã€Œå…¬å¸ç®€ä»‹ã€</h2>
              <p class="intro-main">
                æ— é”¡çš‡å¾·å›½é™…è´¸æ˜“æœ‰é™å…¬å¸æ˜¯ä¸€å®¶ä¸“ä¸šä»äº‹æ¶¡è½®å¢å‹å™¨é…ä»¶å’Œå…±è½¨å–·æ²¹å™¨éƒ¨ä»¶ä¾›åº”çš„æœåŠ¡å…¬å¸ã€‚
              </p>
              <p class="intro-detail">
                æˆ‘ä»¬çš„ä¸“ä¸šå›¢é˜Ÿè‡´åŠ›äºä¸ºå…¨çƒå®¢æˆ·é‡‡è´­å’Œæä¾›é«˜è´¨é‡çš„æ¶¡è½®å¢å‹å™¨éƒ¨ä»¶å’Œå–·æ²¹å™¨éƒ¨ä»¶ã€‚
              </p>
              <p class="intro-detail">
                ä¸ºå¤šä¸ªè¡Œä¸šæä¾›é«˜æ€§èƒ½çš„æ±½è½¦é›¶éƒ¨ä»¶è§£å†³æ–¹æ¡ˆã€‚
              </p>
              <p class="intro-detail">
                è¶…è¿‡15å¹´çš„ä»£ç†ç»éªŒï¼Œç¡®ä¿æ¯ä¸€ä¸ªäº§å“éƒ½ç¬¦åˆæœ€é«˜çš„è´¨é‡æ ‡å‡†ã€‚
              </p>
            </div>
          </div>
        </div>
      </section>

      <!-- è”ç³»æˆ‘ä»¬ -->
      <section id="contact" class="contact-section">
        <div class="container">
          <div class="section-header">
            <h2>è”ç³»æˆ‘ä»¬</h2>
            <p>
              ç«‹å³è”ç³»æˆ‘ä»¬è·å–ä¸“ä¸šçš„äº§å“å’¨è¯¢å’ŒæŠ¥ä»·æœåŠ¡
            </p>
          </div>

          <!-- è”ç³»ä¿¡æ¯å¡ç‰‡è¡Œ - å¹¶åˆ—æ˜¾ç¤º -->
          <div class="contact-info-row">
            <div class="contact-item">
              <div class="contact-icon">
                <i class="fas fa-building"></i>
              </div>
              <div class="contact-details">
                <h4>åœ°å€</h4>
                <p id="company-address">æ­£åœ¨åŠ è½½...</p>
                <p class="postal-code" id="company-postal-code">
                  é‚®ç¼–: æ­£åœ¨åŠ è½½...
                </p>
              </div>
            </div>

            <div class="contact-item">
              <div class="contact-icon">
                <i class="fas fa-phone"></i>
              </div>
              <div class="contact-details">
                <h4>ç”µè¯</h4>
                <p id="company-phone">æ­£åœ¨åŠ è½½...</p>
                <a
                  href="tel:"
                  id="company-phone-link"
                  class="btn-contact"
                  >ç«‹å³é€šè¯</a
                >
              </div>
            </div>

            <div class="contact-item">
              <div class="contact-icon">
                <i class="fab fa-whatsapp"></i>
              </div>
              <div class="contact-details">
                <h4>WhatsApp</h4>
                <p id="company-whatsapp">æ­£åœ¨åŠ è½½...</p>
                <a
                  href="https://wa.me/"
                  id="company-whatsapp-link"
                  class="btn-contact"
                  target="_blank"
                  >WhatsAppè”ç³»</a
                >
              </div>
            </div>

            <div class="contact-item">
              <div class="contact-icon">
                <i class="fas fa-envelope"></i>
              </div>
              <div class="contact-details">
                <h4>é‚®ç®±</h4>
                <p id="company-email">æ­£åœ¨åŠ è½½...</p>
                <a
                  href="mailto:"
                  id="company-email-link"
                  class="btn-contact"
                  >å‘é€é‚®ä»¶</a
                >
              </div>
            </div>
          </div>

          <!-- åœ°å›¾å’Œè¡¨å•åŒºåŸŸ - å·¦å³åˆ†å¸ƒ -->
          <div class="contact-layout">
            <!-- å·¦ä¾§ï¼šåœ°å›¾ -->
            <div class="contact-left">
              <div class="map-container" onclick="openFullMap()" role="button" tabindex="0" aria-label="ç‚¹å‡»æŸ¥çœ‹å®Œæ•´åœ°å›¾">
                <div class="map-overlay">
                  <i
                    class="fas fa-map-marker-alt"
                    style="color: #007bff; font-size: 16px"
                  ></i>
                  <span>æ— é”¡çš‡å¾·å›½é™…è´¸æ˜“æœ‰é™å…¬å¸</span>
                </div>
                <!-- é™æ€åœ°å›¾å›¾ç‰‡ -->
                <img
                  id="static-map-image"
                  src="assets/images/company-location-map-zh.jpg"
                  alt="æ— é”¡çš‡å¾·å›½é™…è´¸æ˜“æœ‰é™å…¬å¸ä½ç½®åœ°å›¾"
                  style="width: 100%; height: 400px; object-fit: cover; border-radius: 15px; cursor: pointer;"
                  loading="lazy"
                />
                <!-- ç‚¹å‡»æç¤ºè¦†ç›–å±‚ -->
                <div class="map-click-hint">
                  <i class="fas fa-external-link-alt"></i>
                  <span>ç‚¹å‡»æŸ¥çœ‹å®Œæ•´åœ°å›¾</span>
                </div>
              </div>
            </div>

            <!-- å³ä¾§ï¼šè¯¢ä»·è¡¨å• -->
            <div class="contact-right">
              <div class="inquiry-form-container">
                <h3>å‘é€è¯¢ä»·ä¿¡æ¯</h3>
                <p class="form-description">
                  è¯·å¡«å†™ä»¥ä¸‹ä¿¡æ¯ï¼Œæˆ‘ä»¬å°†åœ¨24å°æ—¶å†…å›å¤æ‚¨
                </p>

                <form
                  class="inquiry-form"
                  id="inquiryForm"
                  method="POST"
                  action="javascript:void(0)"
                  onsubmit="return false;"
                >
                  <!-- ç¬¬ä¸€è¡Œï¼šå§“åå’Œé‚®ç®±å¹¶æ’ -->
                  <div class="form-row">
                    <div class="form-group half-width">
                      <input
                        type="text"
                        id="inquiryName"
                        name="name"
                        placeholder="æ‚¨çš„å§“å *"
                        required
                        pattern="^[a-zA-Z\u4e00-\u9fa5\s\-\.]{2,30}$"
                        data-error="è¯·è¾“å…¥2-30ä¸ªå­—ç¬¦çš„æœ‰æ•ˆå§“åï¼Œæ”¯æŒä¸­è‹±æ–‡ã€ç©ºæ ¼ã€è¿å­—ç¬¦"
                      />
                      <div class="error-message"></div>
                    </div>

                    <div class="form-group half-width">
                      <input
                        type="email"
                        id="inquiryEmail"
                        name="email"
                        placeholder="é‚®ç®±åœ°å€ *"
                        required
                        pattern="[a-z0-9._%+\-]+@[a-z0-9.\-]+\.[a-z]{2,}$"
                        data-error="è¯·è¾“å…¥æœ‰æ•ˆçš„é‚®ç®±åœ°å€"
                      />
                      <div class="error-message"></div>
                    </div>
                  </div>

                  <!-- ç¬¬äºŒè¡Œï¼šè”ç³»ç”µè¯å’Œå…¬å¸åç§°å¹¶æ’ -->
                  <div class="form-row">
                    <div class="form-group half-width">
                      <input
                        type="tel"
                        id="inquiryPhone"
                        name="phone"
                        placeholder="è”ç³»ç”µè¯"
                        pattern="[\d\s\-\+\(\)]{7,20}"
                        data-error="è¯·è¾“å…¥æœ‰æ•ˆçš„ç”µè¯å·ç "
                      />
                      <div class="error-message"></div>
                    </div>

                    <div class="form-group half-width">
                      <input
                        type="text"
                        id="inquiryCompany"
                        name="company"
                        placeholder="å…¬å¸åç§°"
                      />
                    </div>
                  </div>

                  <!-- ç¬¬ä¸‰è¡Œï¼šè¯¦ç»†éœ€æ±‚ï¼ˆå æ»¡æ•´è¡Œï¼‰ -->
                  <div class="form-group full-width">
                    <textarea
                      id="inquiryMessage"
                      name="message"
                      rows="4"
                      placeholder="è¯¦ç»†éœ€æ±‚ * - è¯·è¯¦ç»†æè¿°æ‚¨çš„éœ€æ±‚ï¼ŒåŒ…æ‹¬äº§å“å‹å·ã€æ•°é‡ç­‰"
                      required
                      minlength="10"
                      maxlength="1000"
                      data-error="éœ€æ±‚æè¿°è‡³å°‘10ä¸ªå­—ç¬¦"
                    ></textarea>
                    <div class="error-message"></div>
                  </div>

                  <button type="submit" class="btn-submit">
                    <i class="fas fa-paper-plane"></i>
                    <span>æäº¤è¯¢ä»·</span>
                  </button>

                  <!-- è¡¨å•åé¦ˆåŒºåŸŸ -->
                  <div id="contactFormFeedback" class="form-feedback" style="display: none; margin-top: 15px;"></div>
                </form>
              </div>
            </div>
          </div>
        </div>
      </section>
    </main>

    <!-- é¡µè„šç»„ä»¶å®¹å™¨ -->
    <div id="footer-container"></div>

    <!-- ğŸš€ ä¼˜åŒ–çš„ç»Ÿä¸€ç®¡ç†å™¨ç³»ç»Ÿ -->
    <script src="assets/js/unified-page-manager.js"></script>
    <script src="assets/js/unified-data-manager.js"></script>
    <script src="assets/js/unified-search-manager.js"></script>
    <script src="assets/js/optimized-loading-manager.js"></script>
    <script src="assets/js/unified-analytics-manager.js"></script>

    <!-- ğŸ¯ é¡µé¢æ¸²æŸ“åè°ƒå™¨ - ç»Ÿä¸€ç®¡ç†æ‰€æœ‰ç»„ä»¶çš„åŠ è½½é¡ºåº -->
    <script src="assets/js/page-render-coordinator.js"></script>

    <!-- ğŸš€ ç»Ÿä¸€é¡µé¢åŠ è½½ç®¡ç†å™¨ - å¿…é¡»æœ€å…ˆåŠ è½½ -->
    <script src="assets/js/page-load-manager.js"></script>

    <!-- ğŸ¨ WebPå›¾ç‰‡ä¼˜åŒ–åŠ è½½å™¨ -->
    <script src="assets/js/webp-loader.js"></script>

    <!-- ğŸ”§ é™æ€é…ç½®æ–‡ä»¶ -->
    <script src="assets/js/static-config.js"></script>

    <!-- ğŸ” SEOç»“æ„åŒ–æ•°æ®ç®¡ç†å™¨ -->
    <script src="assets/js/seo-structured-data.js"></script>

    <!-- ğŸ”§ ç»Ÿä¸€ç»„ä»¶ç®¡ç†ç³»ç»Ÿ -->
    <script src="assets/js/modules/services/company-service.js"></script>
    <script src="assets/js/modules/components/component-manager.js"></script>
    <script src="assets/js/unified-component-loader.js"></script>

    <!-- ğŸ  æ¨¡å—åŒ–åŠŸèƒ½ç»„ä»¶ -->
    <script src="assets/js/modules/carousel-manager.js"></script>
    <script src="assets/js/modules/utils.js"></script>

    <!-- äº§å“æ’åºå·¥å…·ç±» -->
    <script src="assets/js/product-sort-utils.js"></script>

    <!-- ğŸ†• ç»Ÿä¸€äº§å“å¡ç‰‡ç®¡ç†å™¨ -->
    <script src="assets/js/modules/components/product-card-manager.js"></script>

    <!-- äº§å“å¡ç»„ä»¶ï¼ˆå…¼å®¹ç‰ˆæœ¬ï¼‰ -->
    <script src="assets/js/product-card-component.js"></script>

    <!-- ä¸»è¦è„šæœ¬æ–‡ä»¶ï¼ˆç®€åŒ–ç‰ˆï¼‰ -->
    <script src="assets/js/main.js"></script>

    <script>
      // ğŸ  ç®€åŒ–çš„ä¸»é¡µäº§å“å±•ç¤ºåˆå§‹åŒ–
      document.addEventListener("DOMContentLoaded", function () {
        console.log("ğŸ  ä¸»é¡µåˆå§‹åŒ–å¼€å§‹");

        // å»¶è¿Ÿæ‰§è¡Œï¼Œç¡®ä¿æ‰€æœ‰è„šæœ¬åŠ è½½å®Œæˆ
        setTimeout(function () {
          console.log("ğŸš€ å¼€å§‹è‡ªåŠ¨åˆå§‹åŒ–äº§å“å±•ç¤º...");
          initHomepageProducts();
        }, 500); // å¢åŠ å»¶è¿Ÿæ—¶é—´ï¼Œç¡®ä¿æ‰€æœ‰èµ„æºåŠ è½½å®Œæˆ
      });

      // ğŸ¯ ç»Ÿä¸€çš„ä¸»é¡µäº§å“åˆå§‹åŒ–å‡½æ•°
      async function initHomepageProducts() {
        const showcase = document.getElementById("products-showcase");
        if (!showcase) {
          console.log("âŒ äº§å“å±•ç¤ºå®¹å™¨æœªæ‰¾åˆ°");
          return;
        }

        console.log("ğŸš€ å¼€å§‹åŠ è½½ä¸»é¡µäº§å“...");

        // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
        showcase.innerHTML = `
                <div class="loading-text" style="text-align: center; padding: 40px; color: #6c757d;">
                    <i class="fas fa-spinner fa-spin" style="font-size: 24px; margin-bottom: 10px;"></i>
                    <br><span>æ­£åœ¨åŠ è½½æœ€æ–°äº§å“...</span>
                </div>
            `;

        try {
          const response = await fetch("/api/db/public/products?limit=9");
          if (!response.ok) {
            throw new Error(`HTTP ${response.status}: ${response.statusText}`);
          }

          const result = await response.json();
          const products = result.data || result;

          if (!Array.isArray(products) || products.length === 0) {
            throw new Error("æ²¡æœ‰å¯ç”¨çš„äº§å“æ•°æ®");
          }

          const activeProducts = products
            .filter((p) => p.status === "active")
            .slice(0, 9);
          console.log(`âœ… è·å–åˆ° ${activeProducts.length} ä¸ªæ´»è·ƒäº§å“`);

          // ä¿å­˜åˆ°å…¨å±€å˜é‡ä¾›å…¶ä»–åŠŸèƒ½ä½¿ç”¨
          window.featuredProducts = activeProducts;

          // æ¸²æŸ“äº§å“å¡ç‰‡
          renderHomepageProducts(activeProducts, showcase);

          console.log("ğŸ‰ ä¸»é¡µäº§å“å±•ç¤ºåŠ è½½å®Œæˆ");

          // å†…å®¹åŠ è½½å®Œæˆ
        } catch (error) {
          console.error("âŒ äº§å“åŠ è½½å¤±è´¥:", error);
          showcase.innerHTML = `
                    <div class="loading-text" style="color: #dc3545; text-align: center; padding: 40px;">
                        <i class="fas fa-exclamation-triangle" style="font-size: 24px; margin-bottom: 10px;"></i>
                        <br>äº§å“åŠ è½½å¤±è´¥: ${error.message}
                        <br><button onclick="initHomepageProducts()" class="btn-retry"
                            style="margin-top: 15px; padding: 10px 20px; background: #007bff; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 14px;">
                            <i class="fas fa-redo"></i> é‡è¯•åŠ è½½
                        </button>
                    </div>
                `;

          // åŠ è½½å¤±è´¥å¤„ç†å®Œæˆ
        }
      }

      // ğŸ¨ æ¸²æŸ“ä¸»é¡µäº§å“å‡½æ•°
      function renderHomepageProducts(products, container) {
        console.log("ğŸ¨ å¼€å§‹æ¸²æŸ“ä¸»é¡µäº§å“å¡ç‰‡", products);
        console.log("ğŸ” äº§å“å¡ç»„ä»¶çŠ¶æ€:", {
          exists: !!window.productCardComponent,
          hasRenderMethod: !!(
            window.productCardComponent &&
            typeof window.productCardComponent.renderToShowcase === "function"
          ),
        });

        // ç›´æ¥ä½¿ç”¨å¤‡ç”¨æ¸²æŸ“æ–¹æ¡ˆï¼Œç¡®ä¿äº§å“èƒ½å¤Ÿæ˜¾ç¤º
        console.log("âœ… ä½¿ç”¨ç›´æ¥æ¸²æŸ“æ–¹æ¡ˆ");
        renderProductCardsDirectly(products, container);
      }

      // ğŸ¨ ç›´æ¥æ¸²æŸ“äº§å“å¡ç‰‡ï¼ˆå¤‡ç”¨æ–¹æ¡ˆï¼‰
      function renderProductCardsDirectly(products, container) {
        const html = products
          .map((product) => createProductCardHTML(product))
          .join("");
        container.innerHTML = html;
        console.log("âœ… ç›´æ¥æ¸²æŸ“å®Œæˆ");
      }

      // ğŸ—ï¸ åˆ›å»ºäº§å“å¡ç‰‡HTML
      function createProductCardHTML(product) {
        const features = product.features
          ? product.features.split(",").slice(0, 3)
          : [];

        // ğŸ–¼ï¸ è·å–äº§å“å›¾ç‰‡URL - æ”¯æŒæ–°çš„imagesæ•°ç»„æ ¼å¼
        let imageUrl = "assets/images/carousel/img1.jpg"; // é»˜è®¤å›¾ç‰‡

        if (product.images && Array.isArray(product.images) && product.images.length > 0) {
            // ä¼˜å…ˆä½¿ç”¨ä¸»å›¾ï¼Œå¦‚æœæ²¡æœ‰ä¸»å›¾åˆ™ä½¿ç”¨ç¬¬ä¸€å¼ 
            const primaryImage = product.images.find(img => img.isPrimary) || product.images[0];
            if (primaryImage && primaryImage.url) {
                imageUrl = primaryImage.url.startsWith('http') ?
                    primaryImage.url :
                    primaryImage.url;
            }
        } else if (product.image) {
            // å…¼å®¹æ—§çš„å•å›¾ç‰‡æ ¼å¼
            imageUrl = product.image;
        }

        return `
                <div class="product-showcase-card">
                    ${product.isNew ? '<div class="product-badge new">æ–°å“</div>' : ""}
                    ${product.isHot ? '<div class="product-badge hot">çƒ­é—¨</div>' : ""}
                    ${product.isRecommend ? '<div class="product-badge recommend">æ¨è</div>' : ""}

                    <div class="product-image-container">
                        <a href="pages/product-detail.html?id=${product.id}" class="product-image-link">
                            <img src="${imageUrl}" alt="${product.name}" class="product-image"
                                 onerror="this.src='assets/images/carousel/img1.jpg'">
                        </a>
                    </div>

                    <div class="product-info">
                        <div class="product-brand">${product.brand || "Diamond"}</div>
                        <h3 class="product-name">${product.name}</h3>
                        <div class="product-model">${product.model || "æš‚æ— å‹å·"}</div>

                        ${
                          features.length > 0
                            ? `
                            <div class="product-features">
                                ${features
                                  .map(
                                    (feature) => `
                                    <span class="feature-tag">
                                        <i class="fas fa-check"></i>
                                        <span class="feature-text">${feature.trim()}</span>
                                    </span>
                                `,
                                  )
                                  .join("")}
                            </div>
                        `
                            : ""
                        }

                        <div class="product-buttons">
                            <a href="pages/product-detail.html?id=${product.id}" class="product-btn btn-detail">
                                <i class="fas fa-info-circle"></i>
                                <span>æŸ¥çœ‹è¯¦æƒ…</span>
                            </a>
                            <a href="https://wa.me/8613656157230?text=æˆ‘å¯¹äº§å“${encodeURIComponent(product.name)}æ„Ÿå…´è¶£ï¼Œè¯·æä¾›æ›´å¤šä¿¡æ¯"
                               target="_blank" class="product-btn btn-inquiry">
                                <i class="fab fa-whatsapp"></i>
                                <span>ç«‹å³è¯¢ä»·</span>
                            </a>
                        </div>
                    </div>
                </div>
            `;
      }

      // ğŸ  ä¸»é¡µå…¶ä»–åŠŸèƒ½åˆå§‹åŒ–
      function initOtherHomepageFeatures() {
        console.log("ğŸ  ä¸»é¡µå…¶ä»–åŠŸèƒ½åˆå§‹åŒ–");

        // ğŸ“ åˆå§‹åŒ–å…¬å¸ä¿¡æ¯ï¼ˆä½¿ç”¨é™æ€é…ç½®ï¼‰
        setTimeout(function () {
          try {
            if (window.companyService) {
              window.companyService.updatePageElements();
              console.log("âœ… å…¬å¸ä¿¡æ¯å·²æ›´æ–°ï¼ˆé™æ€é…ç½®ï¼‰");
            }
          } catch (error) {
            console.error("âŒ æ›´æ–°å…¬å¸ä¿¡æ¯å¤±è´¥:", error);
          }
        }, 200);

        // ğŸ“ åˆå§‹åŒ–è”ç³»è¡¨å•
        setTimeout(function () {
          try {
            if (typeof window.initContactForms === "function") {
              window.initContactForms();
              console.log("âœ… è”ç³»è¡¨å•åˆå§‹åŒ–å®Œæˆ");
            }
          } catch (error) {
            console.error("âŒ è”ç³»è¡¨å•åˆå§‹åŒ–å¤±è´¥:", error);
          }
        }, 300);
      }

      // ğŸ  ä¸»é¡µäº§å“åŠ è½½å‡½æ•°ï¼ˆä¾›ç»„ä»¶ç®¡ç†å™¨è°ƒç”¨ï¼‰
      window.loadHomepageProducts = async function () {
        console.log("ğŸ  ä¸»é¡µäº§å“åŠ è½½å‡½æ•°è¢«è°ƒç”¨");
        // ä½¿ç”¨é¡µé¢åŠ è½½ç®¡ç†å™¨çš„äº§å“åŠ è½½åŠŸèƒ½
        if (window.PageLoadManager && !window.PageLoadManager.isInitialized('homepage-products')) {
          await window.PageLoadManager.safeInit('homepage-products', async function() {
            console.log("ğŸ  å¼€å§‹åŠ è½½ä¸»é¡µäº§å“å±•ç¤º...");
            // äº§å“åŠ è½½é€»è¾‘å·²åœ¨PageLoadManagerä¸­å®ç°
          });
        }
      };

      // ğŸ§ª æµ‹è¯•äº§å“åŠ è½½å‡½æ•°
      window.testProductLoad = async function () {
        console.log("ğŸ§ª æ‰‹åŠ¨æµ‹è¯•äº§å“åŠ è½½...");
        const showcase = document.getElementById("products-showcase");
        if (!showcase) {
          console.error("âŒ æ‰¾ä¸åˆ°äº§å“å±•ç¤ºå®¹å™¨");
          return;
        }

        showcase.innerHTML = `
                <div style="text-align: center; padding: 20px; color: #007bff;">
                    <i class="fas fa-spinner fa-spin"></i> æ­£åœ¨æ‰‹åŠ¨æµ‹è¯•APIè°ƒç”¨...
                </div>
            `;

        try {
          console.log("ğŸ“¡ å¼€å§‹APIè°ƒç”¨...");
          const response = await fetch("/api/db/public/products?limit=9");
          console.log("ğŸ“¡ APIå“åº”çŠ¶æ€:", response.status, response.statusText);

          const result = await response.json();
          console.log("ğŸ“¦ APIè¿”å›æ•°æ®:", result);

          const products = result.data || result;
          console.log("ğŸ¯ å¤„ç†åçš„äº§å“æ•°æ®:", products);

          if (!Array.isArray(products) || products.length === 0) {
            throw new Error("æ²¡æœ‰å¯ç”¨çš„äº§å“æ•°æ®");
          }

          // ç›´æ¥æ¸²æŸ“äº§å“
          renderProductCardsDirectly(products, showcase);
          console.log("âœ… æ‰‹åŠ¨æµ‹è¯•å®Œæˆ");
        } catch (error) {
          console.error("âŒ æ‰‹åŠ¨æµ‹è¯•å¤±è´¥:", error);
          showcase.innerHTML = `
                    <div style="text-align: center; padding: 20px; color: #dc3545;">
                        âŒ æµ‹è¯•å¤±è´¥: ${error.message}
                        <br><button onclick="testProductLoad()" style="margin-top: 10px; padding: 8px 16px; background: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer;">é‡è¯•</button>
                    </div>
                `;
        }
      };

      // åœ¨DOMåŠ è½½å®Œæˆååˆå§‹åŒ–å…¶ä»–åŠŸèƒ½
      document.addEventListener("DOMContentLoaded", function () {
        setTimeout(initOtherHomepageFeatures, 500);
      });

      // è½®æ’­å›¾ç‚¹å‡»å¯¼èˆªåˆ°äº§å“é¡µé¢
      function navigateToProducts(category) {
        window.location.href = `pages/products.html?category=${category}`;
      }

      // åœ°å›¾é…ç½® - å…¬å¸ç²¾ç¡®åæ ‡
      const MAP_CONFIG = {
        // å…¬å¸åæ ‡ - æ— é”¡å¸‚é”¡å±±åŒºä¸œæ¸¯é•‡é»„åœŸå¡˜æ‘å·¥ä¸šå›­åŒºåˆ›ä¸šè·¯107å·
        latitude: 31.691717, // çº¬åº¦ (åŒ—çº¬) - ç²¾ç¡®åæ ‡
        longitude: 120.486254, // ç»åº¦ (ä¸œç») - ç²¾ç¡®åæ ‡
        zoom: 16, // ç¼©æ”¾çº§åˆ«
        companyName: "æ— é”¡çš‡å¾·å›½é™…è´¸æ˜“æœ‰é™å…¬å¸",
        // è°·æ­Œé™æ€åœ°å›¾APIå¯†é’¥ï¼ˆç¤ºä¾‹å¯†é’¥ï¼Œå®é™…ä½¿ç”¨æ—¶éœ€è¦æ›¿æ¢ä¸ºæœ‰æ•ˆå¯†é’¥ï¼‰
        apiKey: "AIzaSyBOti4mM-6x9WDnZIjIeyEU21OpBXqWBgw"
      };

      // é™æ€åœ°å›¾æ˜¾ç¤ºåŠŸèƒ½ï¼ˆä»…ä¸­æ–‡ï¼‰
      function initStaticMap() {
        const mapImage = document.getElementById("static-map-image");
        if (!mapImage) return;

        // ä½¿ç”¨ä¸­æ–‡åœ°å›¾
        const mapImagePath = "assets/images/company-location-map-zh.jpg";
        mapImage.src = mapImagePath;
        console.log(`ğŸ—ºï¸ é™æ€åœ°å›¾å·²åŠ è½½: ${mapImagePath}`);
      }

      // æ‰“å¼€å®Œæ•´åœ°å›¾åŠŸèƒ½
      function openFullMap() {
        const coords = `${MAP_CONFIG.latitude},${MAP_CONFIG.longitude}`;
        const mapUrl = `https://www.google.com/maps?q=${coords}&hl=zh-CN&z=${MAP_CONFIG.zoom}`;

        window.open(mapUrl, '_blank', 'noopener,noreferrer');
        console.log(`ğŸ—ºï¸ å·²åœ¨æ–°æ ‡ç­¾é¡µæ‰“å¼€å®Œæ•´åœ°å›¾: ${mapUrl}`);
      }

      // é”®ç›˜è®¿é—®æ”¯æŒ
      document.addEventListener('keydown', function(e) {
        if (e.target.classList.contains('map-container') && (e.key === 'Enter' || e.key === ' ')) {
          e.preventDefault();
          openFullMap();
        }
      });



      // åœ°å›¾è°ƒè¯•åŠŸèƒ½ - åœ¨æ§åˆ¶å°ä¸­ä½¿ç”¨ï¼ˆæœ¬åœ°å›¾ç‰‡ç‰ˆæœ¬ï¼‰
      window.updateMapCoords = function (lat, lng, zoom = 16) {
        MAP_CONFIG.latitude = lat;
        MAP_CONFIG.longitude = lng;
        MAP_CONFIG.zoom = zoom;
        console.log(`ğŸ—ºï¸ åœ°å›¾åæ ‡å·²æ›´æ–°: ${lat}, ${lng}, ç¼©æ”¾: ${zoom}`);
        console.log(`ğŸ“ æ³¨æ„: å½“å‰ä½¿ç”¨æœ¬åœ°åœ°å›¾å›¾ç‰‡ï¼Œåæ ‡æ›´æ–°ä¸ä¼šå½±å“æ˜¾ç¤º`);
        console.log(`ğŸ’¡ å¦‚éœ€æ›´æ–°åœ°å›¾æ˜¾ç¤ºï¼Œè¯·é‡æ–°ä¸‹è½½å¯¹åº”åæ ‡çš„åœ°å›¾å›¾ç‰‡`);
      };

      // æ˜¾ç¤ºå½“å‰åœ°å›¾é…ç½®
      window.showMapConfig = function () {
        console.log("ğŸ—ºï¸ å½“å‰åœ°å›¾é…ç½®:", MAP_CONFIG);
        console.log(`ğŸ“ åæ ‡: ${MAP_CONFIG.latitude}, ${MAP_CONFIG.longitude}`);
        console.log(`ğŸ” ç¼©æ”¾: ${MAP_CONFIG.zoom}`);
      };



      // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–åœ°å›¾
      document.addEventListener("DOMContentLoaded", () => {
        setTimeout(initStaticMap, 500); // å»¶è¿Ÿç¡®ä¿DOMå·²åŠ è½½
      });
    </script>
    <script src="./assets/js/resource-checker.js"></script>



    <!-- ğŸš€ æ€§èƒ½ç›‘æ§ç³»ç»Ÿ -->
    <script src="assets/js/performance-monitor.js"></script>
    <script>
      // å¯ç”¨æ€§èƒ½ç›‘æ§
      window.addEventListener('load', function() {
        console.log('ğŸ“Š æ€§èƒ½ç›‘æ§ç³»ç»Ÿå·²å¯ç”¨');
        
        // æ”¶é›†é¡µé¢æ€§èƒ½æŒ‡æ ‡
        setTimeout(function() {
          const perfData = {
            loadTime: performance.now(),
            domContentLoaded: performance.timing.domContentLoadedEventEnd - performance.timing.navigationStart,
            pageLoad: performance.timing.loadEventEnd - performance.timing.navigationStart,
            firstPaint: performance.getEntriesByType('paint')[0]?.startTime || 0,
            resources: performance.getEntriesByType('resource').length
          };
          
          console.log('ğŸ“ˆ é¡µé¢æ€§èƒ½æŒ‡æ ‡:', perfData);
          
          // å‘é€æ€§èƒ½æ•°æ®åˆ°æœåŠ¡å™¨ï¼ˆå¦‚æœAPIå¯ç”¨ï¼‰
          if (typeof fetch !== 'undefined') {
            fetch('/api/performance/report', {
              method: 'POST',
              headers: { 'Content-Type': 'application/json' },
              body: JSON.stringify(perfData)
            }).catch(err => console.log('æ€§èƒ½æ•°æ®ä¸ŠæŠ¥å¤±è´¥:', err.message));
          }
        }, 1000);
      });
    </script>

    <!-- ğŸ“Š æ€§èƒ½ç›‘æ§å™¨ (å¯é€‰ï¼Œç”¨äºç›‘æ§ä¿®å¤æ•ˆæœ) -->
    <script src="performance-monitor.js" async defer></script>
</body>
</html>
