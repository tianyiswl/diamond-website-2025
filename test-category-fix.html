<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åˆ†ç±»ä¸‹æ‹‰æ¡†è‹±æ–‡æ˜¾ç¤ºæµ‹è¯•</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background-color: #f8f9fa;
            padding: 20px;
        }
        .test-container {
            max-width: 600px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .test-result {
            margin-top: 20px;
            padding: 15px;
            border-radius: 5px;
        }
        .success {
            background-color: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
        }
        .error {
            background-color: #f8d7da;
            border: 1px solid #f5c6cb;
            color: #721c24;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1 class="mb-4">ğŸ§ª åˆ†ç±»ä¸‹æ‹‰æ¡†è‹±æ–‡æ˜¾ç¤ºæµ‹è¯•</h1>
        <p class="text-muted mb-4">æµ‹è¯•JavaScriptåŠ¨æ€å¡«å……çš„åˆ†ç±»ä¸‹æ‹‰æ¡†æ˜¯å¦æ˜¾ç¤ºè‹±æ–‡</p>

        <!-- æ¨¡æ‹Ÿåå°çš„åˆ†ç±»ä¸‹æ‹‰æ¡† -->
        <div class="mb-3">
            <label for="product-category" class="form-label">äº§å“åˆ†ç±» (JavaScriptåŠ¨æ€å¡«å……)</label>
            <select class="form-select" id="product-category" name="category">
                <!-- è¿™é‡Œä¼šè¢«JavaScriptåŠ¨æ€å¡«å…… -->
            </select>
        </div>

        <div class="mb-3">
            <label for="filter-category" class="form-label">ç­›é€‰åˆ†ç±» (JavaScriptåŠ¨æ€å¡«å……)</label>
            <select class="form-select" id="filter-category" name="filter-category">
                <!-- è¿™é‡Œä¼šè¢«JavaScriptåŠ¨æ€å¡«å…… -->
            </select>
        </div>

        <button type="button" class="btn btn-primary" onclick="testCategoryFill()">
            ğŸ”„ é‡æ–°å¡«å……åˆ†ç±»é€‰é¡¹
        </button>

        <div id="test-results" class="test-result" style="display: none;">
            <!-- æµ‹è¯•ç»“æœå°†æ˜¾ç¤ºåœ¨è¿™é‡Œ -->
        </div>
    </div>

    <script>
        // å¤åˆ¶åå°çš„é™æ€åˆ†ç±»æ•°æ® - ä½¿ç”¨è‹±æ–‡
        const staticCategories = [
            { id: 'all', name: 'All Products' },
            { id: 'turbocharger', name: 'Turbocharger' },
            { id: 'actuator', name: 'Actuator' },
            { id: 'injector', name: 'Common Rail Injector' },
            { id: 'turbo-parts', name: 'Turbo Parts' },
            { id: 'others', name: 'Others' }
        ];

        // å¤åˆ¶åå°çš„å¡«å……åˆ†ç±»ç­›é€‰å™¨å‡½æ•°
        function populateCategoryFilters() {
            const filterSelect = document.getElementById('filter-category');
            const formSelect = document.getElementById('product-category');

            if (filterSelect) {
                // ä¸ºäº§å“ç­›é€‰å™¨è®¾ç½®é€‰é¡¹ï¼ˆåŒ…å«"æ‰€æœ‰åˆ†ç±»"é€‰é¡¹ï¼‰
                filterSelect.innerHTML = staticCategories.map(cat =>
                    `<option value="${cat.id === 'all' ? '' : cat.id}">${cat.name}</option>`
                ).join('');
            }

            if (formSelect) {
                // ä¸ºæ·»åŠ äº§å“è¡¨å•è®¾ç½®é€‰é¡¹ï¼ˆä¸åŒ…å«"å…¨éƒ¨äº§å“"é€‰é¡¹ï¼‰
                formSelect.innerHTML = staticCategories
                    .filter(cat => cat.id !== 'all')
                    .map(cat => `<option value="${cat.id}">${cat.name}</option>`)
                    .join('');

                // è®¾ç½®é»˜è®¤å€¼ä¸ºæ¶¡è½®å¢å‹å™¨
                formSelect.value = 'turbocharger';
            }
        }

        // æµ‹è¯•å‡½æ•°
        function testCategoryFill() {
            console.log('ğŸ§ª å¼€å§‹æµ‹è¯•åˆ†ç±»å¡«å……...');
            
            // æ‰§è¡Œå¡«å……å‡½æ•°
            populateCategoryFilters();
            
            // æ£€æŸ¥ç»“æœ
            const formSelect = document.getElementById('product-category');
            const filterSelect = document.getElementById('filter-category');
            const resultsDiv = document.getElementById('test-results');
            
            let testResults = [];
            let allPassed = true;
            
            // æ£€æŸ¥äº§å“åˆ†ç±»ä¸‹æ‹‰æ¡†
            if (formSelect && formSelect.options.length > 0) {
                const firstOption = formSelect.options[0];
                const isEnglish = firstOption.text === 'Turbocharger';
                testResults.push({
                    test: 'äº§å“åˆ†ç±»ä¸‹æ‹‰æ¡†',
                    expected: 'Turbocharger',
                    actual: firstOption.text,
                    passed: isEnglish
                });
                if (!isEnglish) allPassed = false;
            }
            
            // æ£€æŸ¥ç­›é€‰åˆ†ç±»ä¸‹æ‹‰æ¡†
            if (filterSelect && filterSelect.options.length > 0) {
                const firstOption = filterSelect.options[0];
                const isEnglish = firstOption.text === 'All Products';
                testResults.push({
                    test: 'ç­›é€‰åˆ†ç±»ä¸‹æ‹‰æ¡†',
                    expected: 'All Products',
                    actual: firstOption.text,
                    passed: isEnglish
                });
                if (!isEnglish) allPassed = false;
            }
            
            // æ˜¾ç¤ºæµ‹è¯•ç»“æœ
            resultsDiv.style.display = 'block';
            resultsDiv.className = `test-result ${allPassed ? 'success' : 'error'}`;
            resultsDiv.innerHTML = `
                <h5>${allPassed ? 'âœ… æµ‹è¯•é€šè¿‡' : 'âŒ æµ‹è¯•å¤±è´¥'}</h5>
                <ul>
                    ${testResults.map(result => `
                        <li>
                            <strong>${result.test}</strong>: 
                            æœŸæœ› "${result.expected}", 
                            å®é™… "${result.actual}" 
                            ${result.passed ? 'âœ…' : 'âŒ'}
                        </li>
                    `).join('')}
                </ul>
                <p class="mt-3">
                    <strong>ç»“è®º</strong>: ${allPassed ? 
                        'åˆ†ç±»ä¸‹æ‹‰æ¡†ç°åœ¨æ­£ç¡®æ˜¾ç¤ºè‹±æ–‡é€‰é¡¹ï¼' : 
                        'åˆ†ç±»ä¸‹æ‹‰æ¡†ä»ç„¶æ˜¾ç¤ºä¸­æ–‡ï¼Œéœ€è¦è¿›ä¸€æ­¥æ£€æŸ¥ã€‚'
                    }
                </p>
            `;
            
            console.log('ğŸ§ª æµ‹è¯•ç»“æœ:', testResults);
        }

        // é¡µé¢åŠ è½½å®Œæˆåè‡ªåŠ¨æ‰§è¡Œæµ‹è¯•
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ğŸ“‹ é¡µé¢åŠ è½½å®Œæˆï¼Œå¼€å§‹åˆå§‹åŒ–æµ‹è¯•...');
            testCategoryFill();
        });
    </script>
</body>
</html>
