# ğŸš€ ç”Ÿäº§ç¯å¢ƒå®‰å…¨éƒ¨ç½²æŒ‡å—

## ğŸ“‹ æ¦‚è¿°

æœ¬æŒ‡å—ç¡®ä¿æ‚¨åœ¨ç”Ÿäº§ç¯å¢ƒä¸­å®‰å…¨åœ°è¿›è¡Œä»£ç æ›´æ–°ï¼Œ**å®Œå…¨ä¿æŠ¤ç°æœ‰çš„äº§å“æ•°æ®å’Œç®¡ç†å‘˜è´¦æˆ·ä¿¡æ¯**ã€‚

## ğŸ›¡ï¸ æ•°æ®å®‰å…¨ä¿è¯

### âœ… **æ‚¨çš„æ•°æ®æ˜¯å®‰å…¨çš„ï¼**

æ‚¨çš„é¡¹ç›®ä½¿ç”¨åŸºäºæ–‡ä»¶çš„æ•°æ®å­˜å‚¨ï¼Œç”Ÿäº§æ•°æ®å­˜å‚¨åœ¨ä»¥ä¸‹ä½ç½®ï¼š

- `data/admin-config.json` - ç®¡ç†å‘˜è´¦æˆ·ä¿¡æ¯
- `data/products.json` - äº§å“æ•°æ®
- `data/categories.json` - äº§å“åˆ†ç±»
- `data/inquiries.json` - å®¢æˆ·è¯¢ä»·è®°å½•
- `uploads/products/` - äº§å“å›¾ç‰‡

**è¿™äº›æ–‡ä»¶é€šå¸¸ä¸ä¼šè¢«Gitè·Ÿè¸ªï¼Œå› æ­¤ä»£ç æ›´æ–°ä¸ä¼šè¦†ç›–å®ƒä»¬ã€‚**

## ğŸš€ å®‰å…¨éƒ¨ç½²æµç¨‹

### ç¬¬ä¸€æ­¥ï¼šæ•°æ®ä¿æŠ¤ï¼ˆå¿…é¡»æ‰§è¡Œï¼‰

```bash
# ä¸Šä¼ å¹¶æ‰§è¡Œæ•°æ®ä¿æŠ¤è„šæœ¬
chmod +x production-data-protection.sh
sudo ./production-data-protection.sh
```

**æ­¤è„šæœ¬ä¼šï¼š**

- âœ… å¤‡ä»½æ‰€æœ‰ç”Ÿäº§æ•°æ®
- âœ… é…ç½®.gitignoreä¿æŠ¤æ•°æ®æ–‡ä»¶
- âœ… éªŒè¯æ•°æ®å®Œæ•´æ€§
- âœ… åˆ›å»ºæ¢å¤ç‚¹

### ç¬¬äºŒæ­¥ï¼šå®‰å…¨ä»£ç éƒ¨ç½²

```bash
# æ‰§è¡Œå®‰å…¨éƒ¨ç½²è„šæœ¬
chmod +x safe-deploy.sh
sudo ./safe-deploy.sh
```

**æ­¤è„šæœ¬ä¼šï¼š**

- âœ… è‡ªåŠ¨å¤‡ä»½å½“å‰æ•°æ®
- âœ… åœæ­¢æœåŠ¡
- âœ… æ›´æ–°ä»£ç 
- âœ… ä¿æŠ¤æ•°æ®æ–‡ä»¶
- âœ… æ›´æ–°ä¾èµ–
- âœ… é‡å¯æœåŠ¡
- âœ… éªŒè¯éƒ¨ç½²ç»“æœ

### ç¬¬ä¸‰æ­¥ï¼šéªŒè¯éƒ¨ç½²ç»“æœ

```bash
# æ£€æŸ¥ç³»ç»ŸçŠ¶æ€
chmod +x emergency-data-recovery.sh
./emergency-data-recovery.sh status
```

## ğŸ†˜ ç´§æ€¥æ¢å¤æ–¹æ¡ˆ

å¦‚æœå‡ºç°ä»»ä½•é—®é¢˜ï¼Œå¯ä»¥ç«‹å³æ¢å¤ï¼š

```bash
# æŸ¥çœ‹æ‰€æœ‰å¤‡ä»½
./emergency-data-recovery.sh list

# è‡ªåŠ¨æ¢å¤æœ€æ–°å¤‡ä»½
./emergency-data-recovery.sh auto

# æ¢å¤æŒ‡å®šå¤‡ä»½
./emergency-data-recovery.sh restore backup-filename.tar.gz
```

## ğŸ“ æ–‡ä»¶ç»“æ„è¯´æ˜

```
/opt/diamond-website/          # é¡¹ç›®æ ¹ç›®å½•
â”œâ”€â”€ data/                      # ğŸ”’ æ•°æ®æ–‡ä»¶ï¼ˆå—ä¿æŠ¤ï¼‰
â”‚   â”œâ”€â”€ admin-config.json      # ç®¡ç†å‘˜è´¦æˆ·
â”‚   â”œâ”€â”€ products.json          # äº§å“æ•°æ®
â”‚   â”œâ”€â”€ categories.json        # äº§å“åˆ†ç±»
â”‚   â””â”€â”€ inquiries.json         # å®¢æˆ·è¯¢ä»·
â”œâ”€â”€ uploads/                   # ğŸ”’ ä¸Šä¼ æ–‡ä»¶ï¼ˆå—ä¿æŠ¤ï¼‰
â”‚   â””â”€â”€ products/              # äº§å“å›¾ç‰‡
â”œâ”€â”€ server.js                  # ğŸ”„ åº”ç”¨ä»£ç ï¼ˆä¼šæ›´æ–°ï¼‰
â”œâ”€â”€ package.json               # ğŸ”„ ä¾èµ–é…ç½®ï¼ˆä¼šæ›´æ–°ï¼‰
â””â”€â”€ .gitignore                 # ğŸ›¡ï¸ Gitå¿½ç•¥é…ç½®

/backup/diamond-website/       # å¤‡ä»½ç›®å½•
â”œâ”€â”€ pre-deploy/                # éƒ¨ç½²å‰å¤‡ä»½
â”œâ”€â”€ daily/                     # æ¯æ—¥è‡ªåŠ¨å¤‡ä»½
â””â”€â”€ logs/                      # å¤‡ä»½æ—¥å¿—
```

## âš™ï¸ è‡ªåŠ¨åŒ–é…ç½®

### è®¾ç½®è‡ªåŠ¨å¤‡ä»½ï¼ˆæ¨èï¼‰

```bash
# å®‰è£…è‡ªåŠ¨å¤‡ä»½ç³»ç»Ÿ
sudo chmod +x scripts/backup-setup.sh
sudo ./scripts/backup-setup.sh
```

**è‡ªåŠ¨å¤‡ä»½è®¡åˆ’ï¼š**

- ğŸ“… æ¯æ—¥å‡Œæ™¨2ç‚¹ï¼šæ•°æ®å¤‡ä»½
- ğŸ“… æ¯å‘¨æ—¥å‡Œæ™¨3ç‚¹ï¼šç³»ç»Ÿé…ç½®å¤‡ä»½
- ğŸ“… æ¯æ—¥å‡Œæ™¨4ç‚¹ï¼šæ¸…ç†è¿‡æœŸå¤‡ä»½

### ç›‘æ§æœåŠ¡çŠ¶æ€

```bash
# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
systemctl status diamond-website

# æŸ¥çœ‹å®æ—¶æ—¥å¿—
journalctl -u diamond-website -f

# é‡å¯æœåŠ¡
systemctl restart diamond-website
```

## ğŸ”§ å¸¸ç”¨ç®¡ç†å‘½ä»¤

### å¤‡ä»½ç®¡ç†

```bash
# åˆ›å»ºæ‰‹åŠ¨å¤‡ä»½
./scripts/backup/backup-manager.sh create

# åˆ—å‡ºæ‰€æœ‰å¤‡ä»½
./scripts/backup/backup-manager.sh list

# éªŒè¯å¤‡ä»½å®Œæ•´æ€§
./scripts/backup/backup-manager.sh verify backup-file.tar.gz
```

### æœåŠ¡ç®¡ç†

```bash
# å¯åŠ¨æœåŠ¡
systemctl start diamond-website

# åœæ­¢æœåŠ¡
systemctl stop diamond-website

# é‡å¯æœåŠ¡
systemctl restart diamond-website

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
systemctl status diamond-website
```

### æ•°æ®ç®¡ç†

```bash
# éªŒè¯æ•°æ®å®Œæ•´æ€§
./emergency-data-recovery.sh verify

# æŸ¥çœ‹ç³»ç»ŸçŠ¶æ€
./emergency-data-recovery.sh status
```

## ğŸš¨ æ•…éšœæ’é™¤

### é—®é¢˜1ï¼šæœåŠ¡å¯åŠ¨å¤±è´¥

```bash
# æŸ¥çœ‹è¯¦ç»†é”™è¯¯ä¿¡æ¯
systemctl status diamond-website
journalctl -u diamond-website --no-pager -n 50

# æ£€æŸ¥ç«¯å£å ç”¨
netstat -tlnp | grep 3000

# æ‰‹åŠ¨å¯åŠ¨æµ‹è¯•
cd /opt/diamond-website
node server.js
```

### é—®é¢˜2ï¼šæ•°æ®æ–‡ä»¶ä¸¢å¤±

```bash
# ç«‹å³æ¢å¤æœ€æ–°å¤‡ä»½
./emergency-data-recovery.sh auto

# æˆ–æ¢å¤æŒ‡å®šå¤‡ä»½
./emergency-data-recovery.sh restore backup-filename.tar.gz
```

### é—®é¢˜3ï¼šæƒé™é—®é¢˜

```bash
# ä¿®å¤æ–‡ä»¶æƒé™
sudo chown -R diamond:diamond /opt/diamond-website
sudo chmod -R 755 /opt/diamond-website
```

## ğŸ“Š æœ€ä½³å®è·µ

### 1. éƒ¨ç½²å‰æ£€æŸ¥æ¸…å•

- [ ] æ‰§è¡Œæ•°æ®ä¿æŠ¤è„šæœ¬
- [ ] ç¡®è®¤å¤‡ä»½åˆ›å»ºæˆåŠŸ
- [ ] æ£€æŸ¥æœåŠ¡å½“å‰çŠ¶æ€
- [ ] ç¡®è®¤ç£ç›˜ç©ºé—´å……è¶³

### 2. éƒ¨ç½²åéªŒè¯æ¸…å•

- [ ] æœåŠ¡æ­£å¸¸å¯åŠ¨
- [ ] ç«¯å£æ­£å¸¸ç›‘å¬
- [ ] æ•°æ®æ–‡ä»¶å®Œæ•´
- [ ] ç®¡ç†åå°å¯è®¿é—®
- [ ] äº§å“æ•°æ®æ˜¾ç¤ºæ­£å¸¸

### 3. å®šæœŸç»´æŠ¤ä»»åŠ¡

- [ ] æ¯å‘¨æ£€æŸ¥å¤‡ä»½çŠ¶æ€
- [ ] æ¯æœˆæµ‹è¯•æ¢å¤æµç¨‹
- [ ] æ¯å­£åº¦æ¸…ç†æ—§å¤‡ä»½
- [ ] å®šæœŸæ›´æ–°ç³»ç»Ÿè¡¥ä¸

## ğŸ” å®‰å…¨å»ºè®®

1. **å®šæœŸæ›´æ”¹ç®¡ç†å‘˜å¯†ç **
2. **å¯ç”¨HTTPSåŠ å¯†ä¼ è¾“**
3. **é…ç½®é˜²ç«å¢™è§„åˆ™**
4. **ç›‘æ§å¼‚å¸¸è®¿é—®**
5. **å®šæœŸå¤‡ä»½åˆ°è¿œç¨‹å­˜å‚¨**

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœé‡åˆ°é—®é¢˜ï¼Œè¯·æŒ‰ä»¥ä¸‹é¡ºåºæ’æŸ¥ï¼š

1. **æŸ¥çœ‹ç³»ç»ŸçŠ¶æ€**: `./emergency-data-recovery.sh status`
2. **æ£€æŸ¥æœåŠ¡æ—¥å¿—**: `journalctl -u diamond-website -f`
3. **éªŒè¯æ•°æ®å®Œæ•´æ€§**: `./emergency-data-recovery.sh verify`
4. **å¦‚æœ‰å¿…è¦ï¼Œæ‰§è¡Œæ•°æ®æ¢å¤**: `./emergency-data-recovery.sh auto`

---

## ğŸ¯ æ€»ç»“

é€šè¿‡ä½¿ç”¨æœ¬æŒ‡å—æä¾›çš„è„šæœ¬å’Œæµç¨‹ï¼Œæ‚¨å¯ä»¥ï¼š

âœ… **100%ä¿æŠ¤ç”Ÿäº§æ•°æ®** - ç®¡ç†å‘˜è´¦æˆ·å’Œäº§å“ä¿¡æ¯ç»ä¸ä¸¢å¤±
âœ… **å®‰å…¨æ›´æ–°ä»£ç ** - è‡ªåŠ¨åŒ–éƒ¨ç½²æµç¨‹ï¼Œé™ä½äººä¸ºé”™è¯¯
âœ… **å¿«é€Ÿæ•…éšœæ¢å¤** - ä¸€é”®æ¢å¤åˆ°ä»»æ„å¤‡ä»½ç‚¹
âœ… **æŒç»­ç›‘æ§ä¿æŠ¤** - è‡ªåŠ¨å¤‡ä»½å’Œå®Œæ•´æ€§æ£€æŸ¥

**æ‚¨çš„ç”Ÿäº§æ•°æ®æ˜¯å®‰å…¨çš„ï¼** ğŸ›¡ï¸
